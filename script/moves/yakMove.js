
//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{
    markers.yak1 = createMarker({ lat:31.1387,lng:97.1690}, 'yak','西藏昌都',{ A:['yak'], B:['史前至夏商周'],C:['飲食'],D:['其他'],E:['東亞'] }
,{  title_cn: '描述',title_en: 'Description',
    description_cn: '氂牛是一種青藏高原及喜馬拉雅山區獨有的生物。如今的生物學家尚未還原氂牛的馴化過程。一些學者主張，氂牛的馴化起源自7300年前的青藏高原東部地區。'
    ,description_en:'The yaks are unique creatures of the Qing-Zang Plateau 青藏高原 and the Himalayas. Today\'s biologists have not yet recovered the process of domestication. Some scholars suggest that the domestication of yak originated in the eastern part of the Qing-Zang Plateau 7,300 years ago.'
	,reference:'1. Guillaume Jacques, Jade d\'Alpoim Guedes and Zhang Shuya, “Yak Domestication: A Review of Linguistic, Archaeological, and Genetic Evidence”, Ethnobiology Letters, Vol. 12, No. 1, (2021), pp.103-114.'
    ,imag:''
    ,referenceUrl:''
 });				
}


 //秦漢
{

   
   markers.yak2 = createMarker({ lat:29.3434,lng:102.6516}, 'yak','四川漢源',{ A:['yak'], B:['秦漢'],C:['交通運輸'],D:['陸上絲綢之路'],E:['東亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'筰人，又稱笮人，是秦漢時期中國西南地區的少數民族之一，主要活動範圍位於如今的雅礱江流域，以飼養氂牛而被漢代史書所記錄。'  
    ,description_en:'The Ze people 筰人, one of the minority ethnic groups in the southwestern region of China during the Qin 秦 and Han Dynasties 漢朝, whose main area of activity was in the present-day Yalong River 雅礱江 valley, were recorded in the Han Dynasty historical literature for raising yaks.'
	,reference:'1. 龔偉，〈試談戰國秦漢時期筰人與氂牛關係〉，《中華文化論壇》，期7（2014年7月），頁46-48。'
    ,image:''
    ,referenceUrl:''
   });
//四川鹽源	-lat:27.4269165,lng:101.5046
   

}
//三国
{
    markers.yak3 = createMarker({ lat:36.9533,lng:100.8974}, 'yak','青海海北',{ A:['yak'], B:['三國兩晉南北朝'],C:['農業生產'],D:['其他'],E:['東亞']},
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'吐谷渾是鮮卑族的分支，西晉時從中國東北地區遷徙至青藏高原。南北朝時期，青海湖和祁連山脈之間的草原地帶是吐谷渾的主要遊牧區。在北魏的史料中，氂牛是吐谷渾的主要牲畜之一。'  
     ,description_en:'The Tuyuhun 吐谷渾, a branch of the Xianbei 鮮卑 tribe, migrated from northeastern China to the Qing-Zang Plateau 青藏高原 during the Western Jin Dynasty 西晉. During the Southern and Northern  Dynasties, the steppe area between Qinghai Lake 青海湖 and Qilian Mountains 祁連山 was the main nomadic area of the Tuyukhun. In the historical records of the Northern Wei Dynasty 北魏, the yaks were one of the main livestock of the Tuyuhun.'
	,reference:'1. 魏收，《魏書·列傳第八十九》（北京：中華書局，1997），頁2240-2241。'
     ,image:''
     ,referenceUrl:''});					
     
}

//隋
{
    
   markers.yak4 = createMarker({ lat:32.3920,lng:81.1434}, 'yak','西藏革吉縣',{ A:['yak'], B:['隋'],C:['交通運輸'],D:['陸上絲綢之路'],E:['東亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'女國是一個公元6世紀存在於羌塘高原上的母系遊牧部落。該部落飼養氂牛，並時常跨越喜馬拉雅山脈進入天竺（古印度）進行貿易。'  
    ,description_en:'Nüguo 女國 (Female Country) was an ancient matrilineal nomadic tribe that existed on the Qiangtang Plateau 羌塘高原 in the 6th century. The tribe raises yaks and regularly crosses the Himalayas into Ancient India for trade.'
	,reference:'1. 女國，中國大百科全書網站，www.zgbk.com/ecph/words?SiteID=1&ID=140498&SubID=59542。<br>&emsp;&emsp;&emsp;2. 魏徵等，《隋書·列傳第四十八》（北京：中華書局，1997），頁1850-1851。'
    ,image:''
    ,referenceUrl:''});		
 //印度德里	-lat:28.6863493,lng:77.1919
    

}

//唐
{
	
   markers.yak5 = createMarker({lat:34.9981,lng:104.6293}, 'yak','甘肅隴西',{ A:['yak'], B:['唐'],C:['軍事'],D:['其他'],E:['東亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'唐代在隴右地區設立了大量牧監來管理官方牲畜的牧養（今甘肅地區）。天寶十三載（公元754年），隴右牧所管理的牛、馬、羊、駱駝等牲畜共計605603頭。其中氂牛有143頭。'  
    ,description_en:'The Tang Dynasty 唐朝 established official pastures in the Longyou 隴右 areas (present-day Gansu Province 甘肅省). In 754, the total number of cattle, horses, sheep, camels, and other livestock under the management of Longyou Pastures exceeded 600,000, including 143 yaks.'
	,reference:'1. 王溥，《唐會要·卷七十二》（中國國家圖書館藏清乾隆武英殿印本）。'
    ,image:''
    ,referenceUrl:''});		
   
    markers.yak6 = createMarker({lat:29.6443,lng:91.1122}, 'yak','西藏拉薩',{ A:['yak'], B:['唐'],C:['飲食'],D:['陸上絲綢之路'],E:['東亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'吐蕃是唐朝時位於青藏高原的古代政權。根據唐朝的史料，在吐蕃的習俗中，氂牛肉款待外地到訪客人的美食，但在宴會前需要客人自己親手用弓箭射殺氂牛。'  
    ,description_en:'Tibetan Empire was an ancient regime located on the Qing-Zang Plateau 青藏高原 during the Tang Dynasty 唐朝. According to the historical records of the Tang Dynasty, in the custom of the Tibetan Empire, the yak meat was a delicacy for the guests who came from abroad, but before the feast, the guests had to shoot the yak meat with arrows on their own.'
	,reference:'1. 劉昫等，《舊唐書·列傳第一百四十六上》（北京：中華書局，1997），頁5220。'
    ,image:''
    ,referenceUrl:''});	
   
    markers.yak7 = createMarker({lat:29.6413,lng:91.1152 }, 'yak','西藏拉薩',{ A:['yak'], B:['唐'],C:['朝貢'],D:['陸上絲綢之路'],E:['東亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'吐蕃是唐朝時位於青藏高原的古代政權。唐朝初期，吐蕃通過和親的方式與唐朝保持友好關係。長慶四年（公元824年），吐蕃向唐朝進貢過氂牛。此外，有的歷史學家認為吐蕃還繁育過氂牛和普通牛雜交的混血牛，並向唐朝進貢。'  
     ,description_en:'Tibetan Empire was an ancient regime located on the Qing-Zang Plateau 青藏高原 during the Tang Dynasty 唐朝. At the beginning of the Tang Dynasty, Tibetan Empire maintained friendly relations with the Tang Dynasty through marriage alliance. In 824, the Tibetan Empire paid yaks as tribute to the Tang Dynasty. In addition, some historians believe that the Tibetan Empire also bred hybrid cattle, which crossed the yaks and the common cattle, and contributed them to the Tang Dynasty.'
	,reference:'1. 劉昫等，《舊唐書·列傳第一百四十六下》（北京：中華書局，1997），頁5266。<br>&emsp;&emsp;&emsp;2. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T\'ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 74-75.'
     ,image:''
     ,referenceUrl:''});
  //陝西西安	
     	

}

//宋
{}

//元
{}

//明
{}

//清
{	 
    markers.yak8 = createMarker({lat:37.7270,lng:76.9117 }, 'yak','新疆葉城縣棋盤鄉',{ A:['yak'], B:['清'],C:['交通運輸'],D:['其他'],E:['東亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'新疆自古以來就是中國玉石的主要出產地。清朝時，位於葉城縣的密爾岱是開採玉石數量最多的地區。因此，密爾岱也被稱為玉山。該地積雪終年不化，當地居民必須依賴氂牛以運輸玉石。'  
     ,description_en:'Xinjiang 新疆 has been the main source of jade in China since ancient times. During the Qing Dynasty 清朝, Mierdai 密爾岱, located in Yecheng County 葉城縣, was the area of the largest amount of jade. Therefore, Mierdai was also known as Jade Mountain. As the snow in the area never melted, the local people had to rely on yaks to transport the jade.'
	,reference:'1. 徐珂，《清稗類鈔·第一冊》（北京：中華書局，2010），頁424。'
     ,image:''
     ,referenceUrl:''});	
    
}
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var yaks = [
 'yak1', 'yak2', 'yak3', 'yak4', 'yak5', 'yak6', 'yak7', 'yak8' 
];

for (var i = 0; i < yaks.length; i++) {
 window[yaks[i]] = markers[yaks[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京

var newCoords_yak2_1= {lat:27.4269,lng:101.5046};
var newCoords_yak4_1= {lat:28.6863,lng:77.1919};

var newCoords_yak7_1= RandomCoords(xian);


//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(yak) {
 const position = yak.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}



var initialCoords_yak2 = getInitialCoords(yak2);
var initialCoords_yak4 = getInitialCoords(yak4);
var initialCoords_yak7 = getInitialCoords(yak7);





// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {
        markers.yak2.setPosition(initialCoords_yak2);
        markers.yak7.setPosition(initialCoords_yak7);
        
        markers.yak4.setPosition(initialCoords_yak4);
        
             
     
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        
        var points_2 = [initialCoords_yak2, newCoords_yak2_1, newCoords_yak2_1];
        
    // 计算当前阶段的目标点的索引
        
        
        var targetIndex_2 = Math.floor((currentValue - 1000) / (1000 / (points_2.length-1)));
        
    // 计算插值百分比
        
        
        var percentage_2 = (currentValue - 1000) % (1000 / (points_2.length-1)) / (1000 / (points_2.length-1));
        
        
        percentage_2 = Math.min(1, Math.max(0, percentage_2));
        

    // 计算插值的新位置
        
        
        

        var latDiff = points_2[targetIndex_2 + 1].lat - points_2[targetIndex_2].lat;
        var lngDiff = points_2[targetIndex_2 + 1].lng - points_2[targetIndex_2].lng;
        var interpolatedLat_2 = points_2[targetIndex_2].lat + latDiff * percentage_2;
        var interpolatedLng_2 = points_2[targetIndex_2].lng + lngDiff * percentage_2;

        

    // 设置yak24的位置
        
        
        yak2.setPosition({ lat: interpolatedLat_2, lng: interpolatedLng_2 });
       

    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
       
        
        
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){
        
        var points_4 = [initialCoords_yak4, newCoords_yak4_1, newCoords_yak4_1];
        
        // 计算当前阶段的目标点的索引
            
            
            var targetIndex_4 = Math.floor((currentValue - 3000) / (1000 / (points_4.length-1)));
            
        // 计算插值百分比
            
            
            var percentage_4 = (currentValue - 3000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
            
            
            percentage_4 = Math.min(1, Math.max(0, percentage_4));
            
    
        // 计算插值的新位置
            
            
            
    
            var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
            var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
            var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4;
            var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4;
    
            
    
        // 设置yak44的位置
            
            
            yak4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });
           
        
    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
       
       
        
        var points_7 = [initialCoords_yak7,  newCoords_yak7_1, newCoords_yak7_1];
        
        
        
    // 计算当前阶段的目标点的索引
        
       
        var targetIndex_7 = Math.floor((currentValue - 4000) / (1000 / (points_7.length-1)));
        



    // 计算插值百分比
       
        
        var percentage_7 = (currentValue - 4000) % (1000 / (points_7.length-1)) / (1000 / (points_7.length-1));
        

        
        percentage_7 = Math.min(1, Math.max(0, percentage_7));
        


    // 计算插值的新位置
        
        
        var latDiff = points_7[targetIndex_7 + 1].lat - points_7[targetIndex_7].lat;
        var lngDiff = points_7[targetIndex_7 + 1].lng - points_7[targetIndex_7].lng;
        var interpolatedLat_7 = points_7[targetIndex_7].lat + latDiff * percentage_7
        var interpolatedLng_7 = points_7[targetIndex_7].lng + lngDiff * percentage_7

        

  
        
        yak7.setPosition({ lat: interpolatedLat_7, lng: interpolatedLng_7 });
        

    }
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
       
            
            
           

    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {}
   //明
    if(currentValue >=7000 && currentValue <8000){}

    //清
    if(currentValue >=8000 && currentValue <=9000){}



});




