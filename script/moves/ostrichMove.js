//<br>&emsp;&emsp;&emsp;
markers.ostrich1 = createMarker({ lat:36.2143,lng:36.1475}, 'ostrich','土耳其安塔基亞',{ A:['ostrich'], B:['秦漢'],C:['文化娛樂'],D:['陸上絲綢之路'],E:['西亞'] }
   ,{  title_cn: '描述',title_en: 'Description'
       ,description_cn: '鴕鳥是體型最大的鳥類，善於奔跑，但不會飛翔。西漢時期，中國人首次得知了鴕鳥的有關信息。張騫完成兩次出使西域的任務後，向漢武帝匯報了條支國（位於西亞的塞琉古帝國）有這種大型鳥類的消息。漢朝人一般稱其為｢大鳥｣、｢大雀｣或｢大爵｣。'
       ,description_en: 'Ostriches are the largest birds and are good runners but cannot fly. During the Western Han Dynasty 西漢, the information about the ostrich was first known by the Chinese people. After completing two journeys to the Western Regions, Zhang Qian 張騫 reported the existence of this large bird in the Seleucid Empire in Western Asia to Emperor Wu of the Han Dynasty 漢武帝. The Han people at that time called the ostrich "daniao 大鳥", "daque 大雀", or "dajue 大爵", which means "big bird" in Chinese.'
	   ,reference:'1. 司馬遷，《史記·大宛列傳》（北京：中華書局，1997），頁3163-3164。'
       ,imag:''
       ,referenceUrl:''
    });			
//陝西西安	
     
markers.ostrich2 = createMarker({ lat:36.1618,lng:54.3300}, 'ostrich','伊朗達姆甘',{ A:['ostrich'], B:['秦漢'],C:['朝貢'],D:['陸上絲綢之路'],E:['西亞'] },
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'元和十三年（公元101年），安息帝國（今伊朗）向東漢進貢了獅子和鴕鳥。這是中國歷史中第一條關於引進鴕鳥的記載。'  
	,description_en:'In 101, the Parthian Empire (present-day Iran) contributed lion and ostrich to the Eastern Han Dynasty 東漢. This is the first record of the introduction of the ostrich in Chinese history.'
	,reference:'1. 班固等，《東觀漢記·列傳十一》（北京：中華書局據聚珍版叢書本排印，1985），頁132-133。<br>&emsp;&emsp;&emsp;2. 范曄，《後漢書·西域傳第七十八》（北京：中華書局，1997），頁2918。'  
	,image:''
	,referenceUrl:''
    });
       
markers.ostrich3 = createMarker({ lat:33.3029,lng:44.3332}, 'ostrich','伊拉克巴格達',{ A:['ostrich'], B:['三國兩晉南北朝'],C:['宗教信仰'],D:['陸上絲綢之路'],E:['西亞']},
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'薩珊王朝，又稱波斯第二帝國，統治西亞地區長達四個世紀。波斯語中鴕鳥被稱為｢ushtur murgh｣（意為｢駱駝鳥｣），這一詞彙被直接翻譯成了中文，取代了原本的｢大雀｣等詞彙。在北魏的歷史記載中，薩珊王朝的鴕鳥甚至衍生出了可以食用火焰、鋼鐵等傳說。'  
	,description_en:'The Sassanid Empire, also known as the Second Persian Empire, ruled West Asia for four centuries. In Persians, the ostrich was called "ushtur murgh" (camel bird), which was the name translated into Chinese and replaced the previous name "daniao 大鳥" (big bird). In the historical records of the Northern Wei Dynasty 北魏, the ostrich of the Sassanid Empire even had legends of being able to eat fire and steel.'
	 ,reference:'1. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T’ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 102. <br>&emsp;&emsp;&emsp;2. 魏收，《魏書·列傳第九十》（北京：中華書局，1997），頁2270-2271。'  
	,image:''
	,referenceUrl:''});
    
markers.ostrich4 = createMarker({lat:36.7252,lng:68.8636}, 'ostrich','阿富汗昆都士',{ A:['ostrich'], B:['唐'],C:['朝貢'],D:['陸上絲綢之路'],E:['中亞'] },
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'唐朝最著名的鴕鳥是由吐火羅（今阿富汗南部）在唐高宗時期進貢的。唐朝的許多文獻中有記錄了這隻鴕鳥身材高大、奔跑速度快的特點。在唐高宗的陵墓乾陵中，至今依然保存有一對大型鴕鳥石雕。'  
	,description_en:'The most famous ostrich of the Tang Dynasty 唐朝 was imported from Tokhara (present-day southern Afghanistan) during the reign of Emperor Gaozong of the Tang Dynasty 唐高宗. The features of this ostrich\'s height and high speed of running were recorded in many Tang Dynasty documents. The Qianling Mausoleum 乾陵, the tomb of Emperor Gaozong, still contains a pair of large ostrich stone statues.'
	 ,reference:'1. 歐陽修、宋祁，《新唐書·列傳第一百四十六下》（北京：中華書局，1997），頁6252。<br>&emsp;&emsp;&emsp;2. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T\'ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 102.<br>&emsp;&emsp;&emsp;3. 鴕鳥，乾陵博物館網站，www.zhongguoqianling.com/product/85.html。'  
	,image:'media/OneDrive_1_2024-1-8/408. (Tang Dynasty, Stone Ostrich, housed in Qianling Museum) .jpg'
	,image_content_cn:'唐，鴕鳥石雕，乾陵博物館藏'
    ,image_content_en:'Tang Dynasty, Stone Ostrich, housed in Qianling Museum'
   ,referenceUrl:''});

    
markers.ostrich5 = createMarker({ lat:27.1348,lng:57.0645}, 'ostrich','伊朗米納卜',{ A:['ostrich'], B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['西亞'] },
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'忽魯謨斯，即如今伊朗米納卜，地處霍爾木茲海峽，是進入波斯灣的必經之路。鄭和的船隊曾多次到達此處。1414年，忽魯謨斯國王跟隨鄭和的船隊返回北京，向永樂皇帝進貢馬匹。此外，獅子、長頸鹿、斑馬、鴕鳥、羚羊也是忽魯謨斯經常攜帶的貢品。'  
	,description_en:'Hormuz, the present-day Minab in Iran, was located on the essential route into the Persian Gulf. Zheng He 鄭和 visited this place on several occasions. In 1414, the King of Hormuz visited Beijing 北京 with Zheng He and offered horses to Yongle Emperor 永樂皇帝 as tribute. In addition, lions, giraffes, zebras, ostriches, and oryxes were often the tributes from Hormuz.'
	,reference:'1. 張廷玉等，《明史·列傳第二百十四》（北京：中華書局，1997），頁8452。<br>&emsp;&emsp;&emsp;2. 馬歡，《瀛涯勝覽》（北京：中華書局據寶顏堂秘笈本影印，1985），頁85-86。'  
	,image:''
	,referenceUrl:''});

markers.ostrich6 = createMarker({ lat:12.7891,lng:45.0100}, 'ostrich','也門亞丁',{ A:['ostrich'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['西亞'] },
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'亞丁在明代被稱為阿丹。據史書記載，阿丹國王十分崇敬中國，用大量珍寶與鄭和進行貿易。鄭和船隊從阿丹帶回了長頸鹿、獅子、豹、花貓、斑馬、鴕鳥等動物。'  
	,description_en:'The king of Aden greatly respected the Ming Dynasty 明朝 and traded with Zheng He 鄭和 for a large number of treasures. Zheng He\'s fleet brought back giraffes, lions, leopards, spotted cats, zebras,  ostriches and other animals from Aden.'
	 ,reference:'1. 馬歡，《瀛涯勝覽》（北京：中華書局據寶顏堂秘笈本影印，1985），頁71。'  
	,image:''
	,referenceUrl:''});

markers.ostrich7 = createMarker({ lat:21.4321,lng:39.8060}, 'ostrich','沙特阿拉伯麥加',{ A:['ostrich'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['西亞']},
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'麥加是伊斯蘭教的發祥地，在明朝時被稱為天方。鄭和曾經派遣七名使者到達天方，帶回了長頸鹿、獅子、鴕鳥等動物。'  
	,description_en:'Mecca is the birthplace of Islam. Zheng He 鄭和 once sent seven envoys to Mecca, bringing back giraffes, lions, ostriches and other animals.'
	 ,reference:'1. 馬歡，《瀛涯勝覽》（北京：中華書局據寶顏堂秘笈本影印，1985），頁90-91。'
    ,image:''
	,referenceUrl:''});
    
markers.ostrich8 = createMarker({ lat:1.2535,lng:42.5578},'ostrich','索馬里朱巴蘭',{ A:['ostrich'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['非洲'] },
   {title_cn: '描述',title_en: 'Description'  
	,description_cn:'索馬里的朱巴蘭州，在明代時被稱為竹布。鄭和下西洋時曾經到過此處，記載了當地出產獅子、豹、鴕鳥等動物。永樂年間，竹布曾向明朝朝貢。'  
	,description_en:'The Jubaland of Somalia, which was visited by Zheng He\'s 鄭和 fleet, was recorded as producing lions, leopards, ostriches and other animals. During the Yongle 永樂 period, Jubaland once paid tribute to the Ming Dynasty 明朝.'
	 ,reference:'1. 張廷玉等，《明史·列傳第二百十四》（北京：中華書局，1997），頁8449。'
     ,image:''
	,referenceUrl:''});
   
// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var ostrichs = [
    'ostrich1', 'ostrich2', 'ostrich3', 'ostrich4', 'ostrich5', 'ostrich6', 'ostrich7', 'ostrich8'
];

for (var i = 0; i < ostrichs.length; i++) {
    window[ostrichs[i]] = markers[ostrichs[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
    return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
    var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
    var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
    return { lat: randomLat, lng: randomLng };
}

var newCoords_ostrich1_1= RandomCoords(xian);
var newCoords_ostrich2_1= RandomCoords(luoyang);
var newCoords_ostrich3_1= RandomCoords(luoyang);
var newCoords_ostrich4_1= RandomCoords(xian);
var newCoords_ostrich5_1= RandomCoords(beijing);
var newCoords_ostrich6_1= RandomCoords(beijing);
var newCoords_ostrich7_1= RandomCoords(beijing);
var newCoords_ostrich8_1= RandomCoords(beijing);


var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京
var xian= {lat:34.2655,lng:108.9508};//西安



//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(ostrich) {
    const position = ostrich.getPosition();
    return {
        lat: position.lat(),
        lng: position.lng()
    };
}
var initialCoords_ostrich1 = getInitialCoords(ostrich1);
var initialCoords_ostrich2 = getInitialCoords(ostrich2);
var initialCoords_ostrich3 = getInitialCoords(ostrich3);
var initialCoords_ostrich4 = getInitialCoords(ostrich4);
var initialCoords_ostrich5 = getInitialCoords(ostrich5);
var initialCoords_ostrich6 = getInitialCoords(ostrich6);
var initialCoords_ostrich7 = getInitialCoords(ostrich7);
var initialCoords_ostrich8 = getInitialCoords(ostrich8);




// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
    handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {
        markers.ostrich1.setPosition(initialCoords_ostrich1);
        markers.ostrich2.setPosition(initialCoords_ostrich2);
        markers.ostrich3.setPosition(initialCoords_ostrich3);
        markers.ostrich4.setPosition(initialCoords_ostrich4);
        markers.ostrich5.setPosition(initialCoords_ostrich5);
        markers.ostrich6.setPosition(initialCoords_ostrich6);
        markers.ostrich7.setPosition(initialCoords_ostrich7);
        markers.ostrich8.setPosition(initialCoords_ostrich8);
        
     
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
       
     
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        
        var points_1 = [initialCoords_ostrich1, dunhuang,wuwei,newCoords_ostrich1_1, newCoords_ostrich1_1];
        var points_2 = [initialCoords_ostrich2, dunhuang,dunhuang,wuwei,newCoords_ostrich2_1, newCoords_ostrich2_1];
        
    // 计算当前阶段的目标点的索引
        
        
        var targetIndex_1 = Math.floor((currentValue - 1000) / (1000 / (points_1.length-1)));
        var targetIndex_2 = Math.floor((currentValue - 1000) / (1000 / (points_2.length-1)));
        
    // 计算插值百分比
        
        
        var percentage_1 = (currentValue - 1000) % (1000 / (points_1.length-1)) / (1000 / (points_1.length-1));
        var percentage_2 = (currentValue - 1000) % (1000 / (points_2.length-1)) / (1000 / (points_2.length-1));
        
        
        percentage_1 = Math.min(1, Math.max(0, percentage_1));
        percentage_2 = Math.min(1, Math.max(0, percentage_2));
        

    // 计算插值的新位置
        
        
        

        var latDiff = points_1[targetIndex_1 + 1].lat - points_1[targetIndex_1].lat;
        var lngDiff = points_1[targetIndex_1 + 1].lng - points_1[targetIndex_1].lng;
        var interpolatedLat_1 = points_1[targetIndex_1].lat + latDiff * percentage_1;
        var interpolatedLng_1 = points_1[targetIndex_1].lng + lngDiff * percentage_1;

        var latDiff = points_2[targetIndex_2 + 1].lat - points_2[targetIndex_2].lat;
        var lngDiff = points_2[targetIndex_2 + 1].lng - points_2[targetIndex_2].lng;
        var interpolatedLat_2 = points_2[targetIndex_2].lat + latDiff * percentage_2;
        var interpolatedLng_2 = points_2[targetIndex_2].lng + lngDiff * percentage_2;


    // 设置ostrich24的位置
        
        
        ostrich1.setPosition({ lat: interpolatedLat_1, lng: interpolatedLng_1 });
        ostrich2.setPosition({ lat: interpolatedLat_2, lng: interpolatedLng_2 });
    
    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
       
        var points_3 = [initialCoords_ostrich3, dunhuang,wuwei,newCoords_ostrich3_1, newCoords_ostrich3_1];
        
    // 计算当前阶段的目标点的索引
        
        
        var targetIndex_3 = Math.floor((currentValue - 2000) / (1000 / (points_3.length-1)));
        
        
        
        var percentage_3 = (currentValue - 2000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
        
        
        percentage_3 = Math.min(1, Math.max(0, percentage_3));
        
    // 计算插值的新位置
        
        
        

        var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
        var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
        var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3;
        var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3;

        

    // 设置ostrich24的位置
        
        
        ostrich3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });
        
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){
        

          
        
    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {

        var points_4 = [initialCoords_ostrich4, dunhuang,wuwei,newCoords_ostrich4_1, newCoords_ostrich4_1];
        
        // 计算当前阶段的目标点的索引
            
            
            var targetIndex_4 = Math.floor((currentValue - 4000) / (1000 / (points_4.length-1)));
            
            
            
            var percentage_4 = (currentValue - 4000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
            
            
            percentage_4 = Math.min(1, Math.max(0, percentage_4));
            
        // 计算插值的新位置
            
            
            
    
            var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
            var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
            var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4;
            var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4;
    
            
    
        // 设置ostrich24的位置
            
            
            ostrich4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });

    }
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
        

        

    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {
       
  
       
    
    }
   //明
   if(currentValue >=7000 && currentValue <8000){
      
        
        var points_5 = [initialCoords_ostrich5,  guli,xilan,maliujia,taihai,zhangjiagang,newCoords_ostrich5_1, newCoords_ostrich5_1];
        var points_6 = [initialCoords_ostrich6,  guli,xilan,maliujia,taihai,zhangjiagang,zhangjiagang,newCoords_ostrich6_1, newCoords_ostrich6_1];
        var points_7 = [initialCoords_ostrich7,  jibudi,guli,xilan,maliujia,taihai,zhangjiagang,newCoords_ostrich7_1, newCoords_ostrich7_1];
        var points_8 = [initialCoords_ostrich8,  guli,xilan,maliujia,taihai,zhangjiagang,zhangjiagang,zhangjiagang,zhangjiagang,newCoords_ostrich8_1, newCoords_ostrich8_1];

    // 计算当前阶段的目标点的索引
        
        var targetIndex_5 = Math.floor((currentValue - 7000) / (1000 / (points_5.length-1)));
        var targetIndex_6 = Math.floor((currentValue - 7000) / (1000 / (points_6.length-1)));
        var targetIndex_7 = Math.floor((currentValue - 7000) / (1000 / (points_7.length-1)));
        var targetIndex_8 = Math.floor((currentValue - 7000) / (1000 / (points_8.length-1)));


    // 计算插值百分比
        
        var percentage_5 = (currentValue - 7000) % (1000 / (points_5.length-1)) / (1000 / (points_5.length-1));
        var percentage_6 = (currentValue - 7000) % (1000 / (points_6.length-1)) / (1000 / (points_6.length-1));
        var percentage_7 = (currentValue - 7000) % (1000 / (points_7.length-1)) / (1000 / (points_7.length-1));
        var percentage_8 = (currentValue - 7000) % (1000 / (points_8.length-1)) / (1000 / (points_8.length-1));


       
        percentage_5 = Math.min(1, Math.max(0, percentage_5));
        percentage_6 = Math.min(1, Math.max(0, percentage_6));
        percentage_7 = Math.min(1, Math.max(0, percentage_7));
        percentage_8 = Math.min(1, Math.max(0, percentage_8));


    // 计算插值的新位置

        var latDiff = points_5[targetIndex_5 + 1].lat - points_5[targetIndex_5].lat;
        var lngDiff = points_5[targetIndex_5 + 1].lng - points_5[targetIndex_5].lng;
        var interpolatedLat_5 = points_5[targetIndex_5].lat + latDiff * percentage_5
        var interpolatedLng_5 = points_5[targetIndex_5].lng + lngDiff * percentage_5

        var latDiff = points_6[targetIndex_6 + 1].lat - points_6[targetIndex_6].lat;
        var lngDiff = points_6[targetIndex_6 + 1].lng - points_6[targetIndex_6].lng;
        var interpolatedLat_6 = points_6[targetIndex_6].lat + latDiff * percentage_6
        var interpolatedLng_6 = points_6[targetIndex_6].lng + lngDiff * percentage_6

        
        var latDiff = points_7[targetIndex_7 + 1].lat - points_7[targetIndex_7].lat;
        var lngDiff = points_7[targetIndex_7 + 1].lng - points_7[targetIndex_7].lng;
        var interpolatedLat_7 = points_7[targetIndex_7].lat + latDiff * percentage_7
        var interpolatedLng_7 = points_7[targetIndex_7].lng + lngDiff * percentage_7

        var latDiff = points_8[targetIndex_8 + 1].lat - points_8[targetIndex_8].lat;
        var lngDiff = points_8[targetIndex_8 + 1].lng - points_8[targetIndex_8].lng;
        var interpolatedLat_8 = points_8[targetIndex_8].lat + latDiff * percentage_8
        var interpolatedLng_8 = points_8[targetIndex_8].lng + lngDiff * percentage_8
    
        

        
        ostrich5.setPosition({ lat: interpolatedLat_5, lng: interpolatedLng_5 });
        ostrich6.setPosition({ lat: interpolatedLat_6, lng: interpolatedLng_6 });     
        ostrich7.setPosition({ lat: interpolatedLat_7, lng: interpolatedLng_7 });
        ostrich8.setPosition({ lat: interpolatedLat_8, lng: interpolatedLng_8 });
       
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){
       
        
        
    }
    
    
});










