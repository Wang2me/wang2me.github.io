
//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{

 
}


 //秦漢
{
    markers.shell1 = createMarker({lat:22.321771,lng:114.1644    }, 'shell','中國香港',{ A:['shell'], B:['史前至夏商周'],C:['身份象徵'],D:['其他'],E:['東亞'] }
,{  title_cn: '描述',title_en: 'Description',
    description_cn: '貨貝，是與人類歷史關係密切的一種貝類。包括古代中國在內的許多文明都曾經將其當成貨幣來使用，因此而得名。貨貝主要分佈於太平洋的暖水區，香港就是中國的主要貨貝產地之一。'
    ,description_en:'The money cowries are a kind of shellfish closely related to the history of humans. Many civilizations, including ancient China, have used them as currency, hence the name. The money cowries are mainly found in the warm waters of the Pacific Ocean, and Hong Kong is one of the major recourse in China.'
,reference:'1. 貨貝，中國大百科全書網站，www.zgbk.com/ecph/words?SiteID=1&ID=414624&SubID=203263。'
    ,imag:''
    ,referenceUrl:''
 });
								
					
}
//三国
{ 
markers.shell2 = createMarker({lat:21.6604,lng:109.2038}, 'shell','廣西合浦',{ A:['shell'], B:['秦漢'],C:['身份象徵'],D:['海上絲綢之路'],E:['東亞'] },
{title_cn: '描述',title_en: 'Description'  
,description_cn:'珍珠是產於貝類生物體內的寶石。中國在海洋中開採珍珠的歷史已經超過兩千年。漢代時，廣西合浦就是中國海水珍珠的主要產地。'  
,description_en:'Pearls are gemstones produced in the bodies of shellfish organisms. Pearls have been mined in the oceans of China for more than 2,000 years. During the Han Dynasty 漢朝, Hepu 合浦 in Guangxi Province 廣西 was the main location for the production of Chinese sea pearls.'
,reference:'1. 郭郛、李約瑟、成慶泰，《中國古代動物學史》（北京：科學出版社，1999），頁457。'  
,image:''
,referenceUrl:''

});


markers.shell3 = createMarker({lat:23.1227,lng:113.2485}, 'shell','廣東廣州',{ A:['shell'], B:['秦漢'],C:['朝貢'],D:['海上絲綢之路'],E:['東亞']},
{title_cn: '描述',title_en: 'Description'  
,description_cn:'紫貝，又稱阿拉伯寶螺，廣泛分佈於太平洋的溫暖水域中。這種生物的殼有一定藥用價值。西漢時，南越國曾向漢武帝進貢五百顆紫貝。'  
,description_en:'The Arabian cowries are widely spread in the warm waters of the Pacific Ocean. The shells of this creature were materials of medicines in ancient times. During the Western Han Dynasty 西漢, the Nanyue State 南越國 sent 500 Arabian cowries as tribute to Emperor Wu of the Han Dynasty 漢武帝.'
,reference:'1. 班固，《漢書·西南夷兩粵朝鮮傳第六十五》（北京：中華書局，1997），頁3852。'
,image:''
,referenceUrl:''});				
						
}

//隋
{


}

//唐
{
         
 markers.shell4 = createMarker({lat:41.0289,lng:28.9619}, 'shell','土耳其伊斯坦布爾',{ A:['shell'], B:['三國兩晉南北朝'],C:['身份象徵'],D:['海上絲綢之路'],E:['歐洲'] },
 {title_cn: '描述',title_en: 'Description'  
  ,description_cn:'大秦是中國古代對羅馬帝國的稱呼。東晉的史料中記載，大秦出產珍珠，大秦商人乘船前往安息帝國和印度進行貿易。也有少量大秦商人可以到達中國，航行時間需要三年。'  
  ,description_en:'From the historical records of the Eastern Jin Dynasty, it is recorded that pearls were produced in the Roman Empire. Roman merchants sailed to the Parthian Empire and India to trade. A few Roman merchants also reached China after a three-year ocean voyage.'
 ,reference:'1. 房玄齡等，《晉書·列傳第六十七》（北京：中華書局，1997），頁2544-2546。'
  ,image:''
  ,referenceUrl:''}); 
 //伊朗哈赫巴哈爾，印度孟買，廣東廣州	
 
   
markers.shell5 = createMarker({ lat:7.6427,lng:80.5407}, 'shell','斯里蘭卡',{ A:['shell'],B:['唐'],C:['朝貢'],D:['海上絲綢之路'],E:['南亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'斯里蘭卡在唐代時被稱為獅子國。唐玄宗時期，斯里蘭卡曾向唐朝進貢過巨大的珍珠。'  
 ,description_en:'During the reign of Emperor Xuanzong of the Tang Dynasty 唐玄宗, huge pearls were imported from Sri Lanka as tribute to the Tang Dynasty 唐朝.'
,reference:'1. 歐陽修、宋祁，《新唐書·列傳第一百四十六下》（北京：中華書局，1997），頁6257-6258。'
 ,imag:''});	
//廣東廣州，陝西西安	-
 
markers.shell6 = createMarker({ lat:-6.8937,lng:109.6661}, 'shell','印度尼西亞北加浪岸',{ A:['shell'],B:['宋'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'闍婆（今爪哇島北部）曾向北宋進貢過白鸚鵡，此外還有珍珠、玳瑁等珠寶。'  
 ,description_en:'The Kalingga Kingdom (present-day northern Java) contributed white parrots to the Northern Song Dynasty 北宋, as well as pearls, tortoiseshells, and other jewels.'
,reference:'1. 脫脫等，《宋史·列傳第二百四十八》（北京：中華書局，1997），頁14092。'
 ,image:''
 ,referenceUrl:''});
 
 

markers.shell7 = createMarker({ lat:-2.9680,lng:104.7469}, 'shell','印度尼西亞巨港',{ A:['shell'],B:['宋'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'三佛齊是一個信仰佛教的東南亞國家，其鼎盛時期曾經佔據如今馬來西亞和印度尼西亞的大部分領土。天禧元年（公元1017年），三佛齊向宋朝進貢珍珠和佛經。'  
    ,description_en:'The Srivijaya was a Buddhist kingdom in Southeast Asia, which at its height occupied most of what is now Malaysia and Indonesia. In 1017, the Srivijaya contributed pearls and Buddhist scriptures to the Song Dynasty 宋朝.'
   ,reference:'1. 脫脫等，《宋史·列傳第二百四十八》（北京：中華書局，1997），頁14089。'
    ,image:''
    ,referenceUrl:''});	     
//廣東廣州，河南開封	-lat:23.1093552,lng:113.0934
      
   markers.shell8 = createMarker({lat:10.7821,lng:79.1279}, 'shell','印度坦賈武爾',{ A:['shell'],B:['宋'],C:['朝貢'],D:['海上絲綢之路'],E:['南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'朱羅王朝是10世紀至13世紀位於印度南部的一個古代王國，在宋代被稱為注輦。大中祥符八年（公元1015年），注輦首次向北宋朝貢，貢品中有超過八百公斤的珍珠。'  
    ,description_en:'Chola Dynasty was an ancient empire in south part of India from 10th century to 13th century. In 1015, Chola Dynasty first offered tribute to the Northern Song Dynasty 北宋, which included more than 800 kilograms of pearls.	'
   ,reference:'1. 脫脫等，《宋史·列傳第二百四十八》（北京：中華書局，1997），頁14097。'
    ,image:''
    ,referenceUrl:''});
//廣東廣州，河南開封	-lat:23.1093552,lng:113.0934
   
}

//宋
{
   

    
   markers.shell9 = createMarker({lat:2.2029,lng:102.2476}, 'shell','馬來西亞馬六甲',{ A:['shell'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'馬六甲蘇丹國，在《明史》中被稱為滿剌加。鄭和下西洋時，其國王跟隨鄭和一同返回，成為了明王朝的藩屬國。該國地處馬六甲海峽，是連接印度洋和太平洋的必經之路，也是古代東西方海上貿易的中轉站。珍珠是常見的來自滿剌加的貢品之一。'  
    ,description_en:'Zheng He 鄭和 once reached Malacca Sultanate on his ocean voyages. The Malacca Sultanate became a tributary of the Ming Dynasty 明朝 and maintain a close relationship for a long time. Located in the Strait of Malacca, the state was an essential route connecting the Indian and Pacific Oceans and was also a transit point for the ancient maritime trade between the East and the West. Pearls were one of the most common tributes from Malacca Sultanate.'
   ,reference:'1. 張廷玉等，《明史·列傳第二百十三》（北京：中華書局，1997），頁8417，8419。'
    ,image:''
    ,referenceUrl:''});
//廣東廣州，江蘇南京，北京	-lat:23.1093552,lng:113.0934-lat:32.0689363,lng:118.7829

}
//元
{

     
   markers.shell10 = createMarker({lat:7.4776,lng:80.0068   }, 'shell','斯里蘭卡',{ A:['shell'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'斯里蘭卡在明朝時被稱為錫蘭山。錫蘭山國使者曾多次跟隨鄭和船隊前往明朝進貢。珍珠和珊瑚都是常見的來自錫蘭山的貢品。'  
    ,description_en:'Envoys from Sri Lanka visited China and paid tributes several times with Zheng He\'s 鄭和 fleets. Pearls and coral were common tributes from Sri Lanka.'
   ,reference:'1. 張廷玉等，《明史·列傳第二百十四》（北京：中華書局，1997），頁8445。'
    ,image:''
    ,referenceUrl:''});
    
	

}

//清
{
	
  
 
 }
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var shells = [
 'shell1', 'shell2', 'shell3', 'shell4', 'shell5', 'shell6', 'shell7', 'shell8', 'shell9', 
 'shell10'
];

for (var i = 0; i < shells.length; i++) {
 window[shells[i]] = markers[shells[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京
var nanjing={lat:32.0435,lng:118.7501}//南京


var newCoords_shell3_1= RandomCoords(xian);

var newCoords_shell4_1= {lat:25.2926758,lng:60.6423};
var newCoords_shell4_2= {lat:19.0621877,lng:72.8387};
var newCoords_shell4_3= {lat:23.1226069,lng:113.2575};

var newCoords_shell5_1= {lat:23.1279512,lng:113.2616};
var newCoords_shell5_2= RandomCoords(xian);

var newCoords_shell6_1= RandomCoords(kaifeng);

var newCoords_shell7_1= {lat:23.1093552,lng:113.0934};
var newCoords_shell7_2= RandomCoords(kaifeng);
var newCoords_shell8_1= {lat:23.1093552,lng:113.0934};

var newCoords_shell8_2= RandomCoords(kaifeng);
var newCoords_shell9_1= {lat:23.1093552,lng:113.0934};
var newCoords_shell9_2= RandomCoords(nanjing);
var newCoords_shell9_3= RandomCoords(beijing);
var newCoords_shell10_1= RandomCoords(beijing);







//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(shell) {
 const position = shell.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}


var initialCoords_shell3 = getInitialCoords(shell3);
var initialCoords_shell4 = getInitialCoords(shell4);
var initialCoords_shell5 = getInitialCoords(shell5);
var initialCoords_shell6 = getInitialCoords(shell6);
var initialCoords_shell7 = getInitialCoords(shell7);
var initialCoords_shell8 = getInitialCoords(shell8);
var initialCoords_shell9 = getInitialCoords(shell9);
var initialCoords_shell10 = getInitialCoords(shell10);
// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {
   
        markers.shell3.setPosition(initialCoords_shell3);
        markers.shell4.setPosition(initialCoords_shell4);
        markers.shell5.setPosition(initialCoords_shell5);
        markers.shell6.setPosition(initialCoords_shell6);
        markers.shell7.setPosition(initialCoords_shell7);
        markers.shell8.setPosition(initialCoords_shell8);
        markers.shell9.setPosition(initialCoords_shell9);
        markers.shell10.setPosition(initialCoords_shell10);
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
        
     
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        var points_3 = [initialCoords_shell3,  newCoords_shell3_1, newCoords_shell3_1];
        
        
        
        // 计算当前阶段的目标点的索引
            
            var targetIndex_3 = Math.floor((currentValue - 1000) / (1000 / (points_3.length-1)));
            
    
    
    
        // 计算插值百分比
           
            var percentage_3 = (currentValue - 1000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
            
    
            
            percentage_3 = Math.min(1, Math.max(0, percentage_3));
            
    
    
        // 计算插值的新位置
            
            
            var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
            var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
            var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3
            var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3
            
            
    
            
    
      
            
            shell3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });  
            
    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
        var points_4 = [initialCoords_shell4,  newCoords_shell4_1,newCoords_shell4_2 ,xilan,maliujia,newCoords_shell4_3,newCoords_shell4_3];
        
        
        
        // 计算当前阶段的目标点的索引
            
            var targetIndex_4 = Math.floor((currentValue - 2000) / (1000 / (points_4.length-1)));
            
    
    
    
        // 计算插值百分比
           
            var percentage_4 = (currentValue - 2000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
            
    
            
            percentage_4 = Math.min(1, Math.max(0, percentage_4));
            
    
    
        // 计算插值的新位置
            
            
            var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
            var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
            var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4
            var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4
            
            
    
            
    
      
            
            shell4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });  
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){

    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
        var points_5 = [initialCoords_shell5,maliujia,nanhai,newCoords_shell5_1, newCoords_shell5_1];
   
        // 计算当前阶段的目标点的索引
            var targetIndex_5 = Math.floor((currentValue - 4000) / (1000 / (points_5.length-1)));
            
        // 计算插值百分比
            var percentage_5 = (currentValue - 4000) % (1000 / (points_5.length-1)) / (1000 / (points_5.length-1));
            
            
            percentage_5 = Math.min(1, Math.max(0, percentage_5));
            
            
        // 计算插值的新位置
            
    
            var latDiff = points_5[targetIndex_5 + 1].lat - points_5[targetIndex_5].lat;
            var lngDiff = points_5[targetIndex_5 + 1].lng - points_5[targetIndex_5].lng;
            var interpolatedLat_5 = points_5[targetIndex_5].lat + latDiff * percentage_5;
            var interpolatedLng_5 = points_5[targetIndex_5].lng + lngDiff * percentage_5;
    
            
            
        // 设置shell25的位置
            shell5.setPosition({ lat: interpolatedLat_5, lng: interpolatedLng_5 });
            
        }
       

    
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
        var points_6 = [initialCoords_shell6,  newCoords_shell6_1, newCoords_shell6_1];
        var points_7 = [initialCoords_shell7,  newCoords_shell7_1, newCoords_shell7_1,newCoords_shell7_2];
        var points_8 = [initialCoords_shell8,  maliujia,nanhai,newCoords_shell8_1, newCoords_shell8_1,newCoords_shell8_2];
       
        
        
    // 计算当前阶段的目标点的索引
        var targetIndex_8 = Math.floor((currentValue - 5000) / (1000 / (points_8.length-1)));
        var targetIndex_6 = Math.floor((currentValue - 5000) / (1000 / (points_6.length-1)));
        var targetIndex_7 = Math.floor((currentValue - 5000) / (1000 / (points_7.length-1)));
        



    // 计算插值百分比
        var percentage_8 = (currentValue - 5000) % (1000 / (points_8.length-1)) / (1000 / (points_8.length-1));
        var percentage_6 = (currentValue - 5000) % (1000 / (points_6.length-1)) / (1000 / (points_6.length-1));
        var percentage_7 = (currentValue - 5000) % (1000 / (points_7.length-1)) / (1000 / (points_7.length-1));
       

        percentage_8 = Math.min(1, Math.max(0, percentage_8));
        percentage_6 = Math.min(1, Math.max(0, percentage_6));
        percentage_7 = Math.min(1, Math.max(0, percentage_7));
       


    // 计算插值的新位置
        var latDiff = points_8[targetIndex_8 + 1].lat - points_8[targetIndex_8].lat;
        var lngDiff = points_8[targetIndex_8 + 1].lng - points_8[targetIndex_8].lng;
        var interpolatedLat_8 = points_8[targetIndex_8].lat + latDiff * percentage_8
        var interpolatedLng_8 = points_8[targetIndex_8].lng + lngDiff * percentage_8

        var latDiff = points_6[targetIndex_6 + 1].lat - points_6[targetIndex_6].lat;
        var lngDiff = points_6[targetIndex_6 + 1].lng - points_6[targetIndex_6].lng;
        var interpolatedLat_6 = points_6[targetIndex_6].lat + latDiff * percentage_6
        var interpolatedLng_6 = points_6[targetIndex_6].lng + lngDiff * percentage_6

        var latDiff = points_7[targetIndex_7 + 1].lat - points_7[targetIndex_7].lat;
        var lngDiff = points_7[targetIndex_7 + 1].lng - points_7[targetIndex_7].lng;
        var interpolatedLat_7 = points_7[targetIndex_7].lat + latDiff * percentage_7
        var interpolatedLng_7 = points_7[targetIndex_7].lng + lngDiff * percentage_7

        

  
        shell8.setPosition({ lat: interpolatedLat_8, lng: interpolatedLng_8 });
        shell6.setPosition({ lat: interpolatedLat_6, lng: interpolatedLng_6 }); 
        shell7.setPosition({ lat: interpolatedLat_7, lng: interpolatedLng_7 });  
       
    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {
   
           
    
    }
   //明
    if(currentValue >=7000 && currentValue <8000){
        
        var points_9 = [initialCoords_shell9,  newCoords_shell9_1, newCoords_shell9_1,newCoords_shell9_2,newCoords_shell9_3,newCoords_shell9_3];
        var points_10 = [initialCoords_shell10, maliujia,nanhai,newCoords_shell10_1, newCoords_shell10_1];
       
        
        
    // 计算当前阶段的目标点的索引
        var targetIndex_9 = Math.floor((currentValue - 7000) / (1000 / (points_9.length-1)));
        var targetIndex_10 = Math.floor((currentValue - 7000) / (1000 / (points_10.length-1)));
        



    // 计算插值百分比
        var percentage_9 = (currentValue - 7000) % (1000 / (points_9.length-1)) / (1000 / (points_9.length-1));
        var percentage_10 = (currentValue - 7000) % (1000 / (points_10.length-1)) / (1000 / (points_10.length-1));
       

        percentage_9 = Math.min(1, Math.max(0, percentage_9));
        percentage_10 = Math.min(1, Math.max(0, percentage_10));
       


    // 计算插值的新位置
        var latDiff = points_9[targetIndex_9 + 1].lat - points_9[targetIndex_9].lat;
        var lngDiff = points_9[targetIndex_9 + 1].lng - points_9[targetIndex_9].lng;
        var interpolatedLat_9 = points_9[targetIndex_9].lat + latDiff * percentage_9
        var interpolatedLng_9 = points_9[targetIndex_9].lng + lngDiff * percentage_9

        var latDiff = points_10[targetIndex_10 + 1].lat - points_10[targetIndex_10].lat;
        var lngDiff = points_10[targetIndex_10 + 1].lng - points_10[targetIndex_10].lng;
        var interpolatedLat_10 = points_10[targetIndex_10].lat + latDiff * percentage_10
        var interpolatedLng_10 = points_10[targetIndex_10].lng + lngDiff * percentage_10

        shell9.setPosition({ lat: interpolatedLat_9, lng: interpolatedLng_9 });
        shell10.setPosition({ lat: interpolatedLat_10, lng: interpolatedLng_10 }); 
       
    
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){
        
    }


});




