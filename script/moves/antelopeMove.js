
//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{
	
}


 //秦漢
{

   
   

}
//三国
{
   				
}

//隋
{
    

}

//唐
{
markers.antelope1 = createMarker({ lat:45.6423,lng:25.5790}, 'antelope','羅馬尼亞布拉索夫',{ A:['antelope'], B:['唐'],C:['朝貢'],D:['陸上絲綢之路'],E:['歐洲'] }
,{  title_cn: '描述',title_en: 'Description',
    description_cn: '拜占庭帝國，又稱東羅馬帝國，在中國古籍中被稱為｢大秦｣或｢拂菻｣。開元七年（公元719年），拂菻國在吐火羅人的幫助下向唐朝進貢了兩隻羚羊。唐朝的歷史記載並未說明這兩隻羚羊的品種。有的歷史學家認為，這兩隻羚羊可能是來自喀爾巴阡山的歐洲山羚。'
    ,description_en:'The Byzantine Empire, also known as the Eastern Roman Empire, was named "Da Qin 大秦" or "Fulin 拂菻" in ancient Chinese texts. In 719, the Byzantine Empire sent two antelopes as tribute to the Tang Dynasty 唐朝 with the help of the Tocharians. The historical records of the Tang Dynasty have not indicated the species of these two antelopes. Some historians believe that they may be Chamois from the Carpathians.'
	,reference:'1. 劉昫等，《舊唐書·列傳第一百四十八》（北京：中華書局，1997），頁5314-5315。<br>&emsp;&emsp;&emsp;2. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T’ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 89-90.'
    ,imag:''
    ,referenceUrl:''
 });		
 //土耳其伊斯坦布爾，阿富汗喀布爾，陝西西安	-lat:41.0298182,lng:28.9625-lat:34.5400384,lng:69.0510	
   markers.antelope2 = createMarker({lat:4.4518,lng:114.6058}, 'antelope','文萊',{ A:['antelope'], B:['唐'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'《職貢圖》是中國古代的一種紀實性繪畫，主要描繪外國使者的朝貢情況。台北故宮博物院收藏了一卷唐代畫家閻立本創作的《職貢圖》。研究者們認為這幅圖描繪了古代東南亞地區的使者們向唐朝進貢的情景。在這幅圖中可以看到其中一個使者牽著一隻作為貢品的羚羊。'  
    ,description_en:'The "Portraits of Periodical Offering" are documentary paintings in ancient China, which mainly represent the tributary by foreign envoys. The National Palace Museum in Taipei houses a roll of this painting created by the Tang Dynasty 唐朝 painter Yan Liben 閻立本. Researchers believe that this painting depicts the tribute journey from ancient Southeastern Asia to the Tang Dynasty. In this picture it can be seen that one of the envoys is holding a gazelle as a tribute.'
	,reference:'1. 唐閻立本職貢圖卷，國立故宮博物院，digitalarchive.npm.gov.tw/Painting/Content?pid=25&Dept=P。'
    ,image:'media/OneDrive_1_2024-1-8/400. (Tang Dynasty, Tribute Bearers by Yan Liben, housed in National Palace Museum).jpeg'
    ,image_content_cn:'唐，閻立本職貢圖卷，國立故宮博物院藏'
    ,image_content_en:'Tang Dynasty, Tribute Bearers by Yan Liben, housed in National Palace Museum'
   ,referenceUrl:''});		
   
//越南順華，陝西西安	-lat:16.4532761,lng:107.5694

     	

}

//宋
{}

//元
{}

//明
{
    markers.antelope3 = createMarker({lat:1.1198,lng:44.0317}, 'antelope','索馬里布拉瓦',{ A:['antelope'], B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['非洲'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'東非劍羚，在明朝時被稱為｢馬哈獸｣。在明朝的歷史記錄中，東非劍羚是不剌哇（如今索馬里的巴拉韋）的特產之一，該國曾數次向明朝進貢這種動物。'  
     ,description_en:'In the historical records of the Ming Dynasty 明朝, the Eastern Africian oryx was one of the specialties of Barawa in Somali. The country sent oryxes as tribute to the Ming Dynasty several times.'
	,reference:'1. 張廷玉等，《明史·列傳第二百十四》（北京：中華書局，1997），頁8449。'
     ,image:'media/OneDrive_1_2024-1-8/401. (Ming Dynasty, Oryx in Yiyu Tuzhi, housed in Cambridge University Library).png'
     ,image_content_cn:'明，《異域圖志》馬哈獸圖，劍橋大學圖書館藏'
    ,image_content_en:'Ming Dynasty, Oryx in Yiyu Tuzhi, housed in Cambridge University Library'
   ,referenceUrl:''});	

markers.antelope4 = createMarker({lat:27.1334,lng:57.0739}, 'antelope','伊朗米納卜',{ A:['antelope'], B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['西亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'忽魯謨斯，即如今伊朗米納卜，地處霍爾木茲海峽，是進入波斯灣的必經之路。鄭和的船隊曾多次到達此處。1414年，忽魯謨斯國王跟隨鄭和的船隊返回北京，向永樂皇帝進貢馬匹。此外，獅子和長頸鹿也是忽魯謨斯經常攜帶的貢品。'  
     ,description_en:'Hormuz, the present-day Minab in Iran, was located on the essential route into the Persian Gulf. Zheng He 鄭和 visited this place on several occasions. In 1414, the King of Hormuz visited Beijing 北京 with Zheng He and offered horses to Yongle Emperor 永樂皇帝 as tribute. In addition, lions and giraffes were often the tributes from Hormuz.'
	,reference:'1. 張廷玉等，《明史·列傳第二百十四》（北京：中華書局，1997），頁8452。<br>&emsp;&emsp;&emsp;2. 馬歡，《瀛涯勝覽》（北京：中華書局據寶顏堂秘笈本影印，1985），頁85-86。'
     ,image:''
     ,referenceUrl:''});

markers.antelope5 = createMarker({lat:21.4358,lng:39.8165}, 'antelope','沙特阿拉伯麥加',{ A:['antelope'], B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['西亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'麥加是伊斯蘭教的發祥地，在明朝時被稱為天方。鄭和曾經派遣七名使者到達天方，帶回了許多動物，比如阿拉伯劍羚。'  
     ,description_en:'Mecca is the birthplace of Islam. Zheng He 鄭和 once sent seven envoys to Mecca, bringing alot of animals, for example, the Arabian oryx.'
	,reference:'1. 馬歡，《瀛涯勝覽》（北京：中華書局據寶顏堂秘笈本影印，1985），頁90-91。'
     ,image:''
     ,referenceUrl:''});

     markers.antelope6 = createMarker({lat:41.0159,lng:29.0045}, 'antelope','土耳其伊斯坦布爾',{ A:['antelope'], B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['歐洲'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'鄂圖曼帝國在明代被稱為｢魯迷｣。嘉靖年間，魯迷曾向明朝進貢過羚羊角。在中國傳統醫學的觀念中，羚羊角有著極高的藥用價值。'  
     ,description_en:'During the reign of Emperor Jiajing 嘉靖皇帝, the Ottoman Empire had once contributed antelope horns to the Ming Dynasty 明朝. In traditional Chinese medicine, antelope horn has a high medicinal value.'
	,reference:'1. 張廷玉等，《明史·列傳第二百二十》（北京：中華書局，1997），頁8626-8627。'
     ,image:''
     ,referenceUrl:''});

}

//清
{	 
    
    
}
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var antelopes = [
 'antelope1', 'antelope2', 'antelope3', 'antelope4', 'antelope5', 'antelope6' 
];

for (var i = 0; i < antelopes.length; i++) {
 window[antelopes[i]] = markers[antelopes[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京

var newCoords_antelope1_1= {lat:41.0298,lng:28.9625};
var newCoords_antelope1_2= {lat:34.5400,lng:69.0510};
var newCoords_antelope1_3= RandomCoords(beijing);

var newCoords_antelope2_1= {lat:16.4532,lng:107.5694};
var newCoords_antelope2_2= RandomCoords(xian);

var newCoords_antelope3_1= RandomCoords(beijing);
var newCoords_antelope4_1= RandomCoords(beijing);
var newCoords_antelope5_1= RandomCoords(beijing);
var newCoords_antelope6_1= RandomCoords(beijing);


//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(antelope) {
 const position = antelope.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}



var initialCoords_antelope1 = getInitialCoords(antelope1);
var initialCoords_antelope2 = getInitialCoords(antelope2);
var initialCoords_antelope3 = getInitialCoords(antelope3);
var initialCoords_antelope4 = getInitialCoords(antelope4);
var initialCoords_antelope5 = getInitialCoords(antelope5);
var initialCoords_antelope6 = getInitialCoords(antelope6);





// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {

        
        markers.antelope1.setPosition(initialCoords_antelope1);
        markers.antelope2.setPosition(initialCoords_antelope2);
        markers.antelope3.setPosition(initialCoords_antelope3);
        markers.antelope4.setPosition(initialCoords_antelope4);
        markers.antelope5.setPosition(initialCoords_antelope5);
        markers.antelope6.setPosition(initialCoords_antelope6);
     
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        
       

    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
       
        
        
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){
        
       
        
    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
       
       
        
        var points_1 = [initialCoords_antelope1,  newCoords_antelope1_1, newCoords_antelope1_2,newCoords_antelope1_3,newCoords_antelope1_3];
        var points_2 = [initialCoords_antelope2,  newCoords_antelope2_1, newCoords_antelope2_2,newCoords_antelope2_2];
        
        
        
    // 计算当前阶段的目标点的索引
        
       
    var targetIndex_1 = Math.floor((currentValue - 4000) / (1000 / (points_1.length-1)));
    var targetIndex_2 = Math.floor((currentValue - 4000) / (1000 / (points_2.length-1)));
        



    // 计算插值百分比
       
        
    var percentage_1 = (currentValue - 4000) % (1000 / (points_1.length-1)) / (1000 / (points_1.length-1));
    var percentage_2 = (currentValue - 4000) % (1000 / (points_2.length-1)) / (1000 / (points_2.length-1));
        

        
    percentage_1 = Math.min(1, Math.max(0, percentage_1));
    percentage_2 = Math.min(1, Math.max(0, percentage_2));
        


    // 计算插值的新位置
        
        
        var latDiff = points_1[targetIndex_1 + 1].lat - points_1[targetIndex_1].lat;
        var lngDiff = points_1[targetIndex_1 + 1].lng - points_1[targetIndex_1].lng;
        var interpolatedLat_1 = points_1[targetIndex_1].lat + latDiff * percentage_1
        var interpolatedLng_1 = points_1[targetIndex_1].lng + lngDiff * percentage_1

        var latDiff = points_2[targetIndex_2 + 1].lat - points_2[targetIndex_2].lat;
        var lngDiff = points_2[targetIndex_2 + 1].lng - points_2[targetIndex_2].lng;
        var interpolatedLat_2 = points_2[targetIndex_2].lat + latDiff * percentage_2
        var interpolatedLng_2 = points_2[targetIndex_2].lng + lngDiff * percentage_2

  
        
        antelope1.setPosition({ lat: interpolatedLat_1, lng: interpolatedLng_1 });
        antelope2.setPosition({ lat: interpolatedLat_2, lng: interpolatedLng_2 });
        

    }
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
       
            
            
           

    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {}
   //明
    if(currentValue >=7000 && currentValue <8000){

        
        var points_3 = [initialCoords_antelope3, guli,xilan,maliujia,taihai,zhangjiagang,newCoords_antelope3_1, newCoords_antelope3_1];
        var points_4 = [initialCoords_antelope4, guli,xilan,maliujia,taihai,zhangjiagang,newCoords_antelope4_1, newCoords_antelope4_1,newCoords_antelope4_1];
        var points_5 = [initialCoords_antelope5, jibudi,guli,xilan,maliujia,taihai,zhangjiagang,newCoords_antelope5_1, newCoords_antelope5_1];
        var points_6 = [initialCoords_antelope6, kailuo,jibudi,guli,xilan,maliujia,taihai,zhangjiagang,newCoords_antelope6_1, newCoords_antelope6_1];

    // 计算当前阶段的目标点的索引
       
        var targetIndex_3 = Math.floor((currentValue - 7000) / (1000 / (points_3.length-1)));
        var targetIndex_4 = Math.floor((currentValue - 7000) / (1000 / (points_4.length-1)));
        var targetIndex_5 = Math.floor((currentValue - 7000) / (1000 / (points_5.length-1)));
        var targetIndex_6 = Math.floor((currentValue - 7000) / (1000 / (points_6.length-1)));


    // 计算插值百分比
        
        var percentage_3 = (currentValue - 7000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
        var percentage_4 = (currentValue - 7000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
        var percentage_5 = (currentValue - 7000) % (1000 / (points_5.length-1)) / (1000 / (points_5.length-1));
        var percentage_6 = (currentValue - 7000) % (1000 / (points_6.length-1)) / (1000 / (points_6.length-1));


        
        percentage_3 = Math.min(1, Math.max(0, percentage_3));
        percentage_4 = Math.min(1, Math.max(0, percentage_4));
        percentage_5 = Math.min(1, Math.max(0, percentage_5));
        percentage_6 = Math.min(1, Math.max(0, percentage_6));


    // 计算插值的新位置
        

        var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
        var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
        var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3
        var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3

        
        var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
        var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
        var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4
        var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4

        var latDiff = points_5[targetIndex_5 + 1].lat - points_5[targetIndex_5].lat;
        var lngDiff = points_5[targetIndex_5 + 1].lng - points_5[targetIndex_5].lng;
        var interpolatedLat_5 = points_5[targetIndex_5].lat + latDiff * percentage_5
        var interpolatedLng_5 = points_5[targetIndex_5].lng + lngDiff * percentage_5
    
        var latDiff = points_6[targetIndex_6 + 1].lat - points_6[targetIndex_6].lat;
        var lngDiff = points_6[targetIndex_6 + 1].lng - points_6[targetIndex_6].lng;
        var interpolatedLat_6 = points_6[targetIndex_6].lat + latDiff * percentage_6
        var interpolatedLng_6 = points_6[targetIndex_6].lng + lngDiff * percentage_6

        
        antelope3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });     
        antelope4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });
        antelope5.setPosition({ lat: interpolatedLat_5, lng: interpolatedLng_5 });
        antelope6.setPosition({ lat: interpolatedLat_6, lng: interpolatedLng_6 });
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){}



});




