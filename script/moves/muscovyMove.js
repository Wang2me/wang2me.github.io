
//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{
	
}


 //秦漢
{

   
   

}
//三国
{
   				
}

//隋
{
    

}

//唐
{
markers.muscovy1 = createMarker({lat:15.0231,lng:-91.1598}, 'muscovy','危地馬拉聖克魯斯-德爾切基',{ A:['muscovy'], B:['宋'],C:['飲食'],D:['其他'],E:['北美洲'] }
,{  title_cn: '描述',title_en: 'Description',
    description_cn: '番鴨，學名疣鼻棲鴨，原產於美洲。13世紀開始，位於中美洲的瑪雅人最早飼養番鴨以供食用。'
    ,description_en:'The Muscovy duck is native to the Americas, where it was first raised for food by the Mayans in Central America in the 13th century.'
	,reference:'1. 李偉良，〈清代民國時期番鴨的傳入及其影響〉，《安徽史學》，期3（2022年6月），頁58。'
    ,imag:''
    ,referenceUrl:''
 });
 										

 //土耳其伊斯坦布爾，阿富汗喀布爾，陝西西安	-lat:41.0298182,lng:28.9625-lat:34.5400384,lng:69.0510	
   markers.muscovy2 = createMarker({lat:15.7715,lng:-86.7997}, 'muscovy','洪都拉斯拉塞瓦',{ A:['muscovy'], B:['明'],C:['飲食'],D:['海上絲綢之路'],E:['北美洲'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'15世紀以後，番鴨隨著歐洲的商船傳播至世界其他地區。明朝末期，部分台灣原住民族開始飼養番鴨。這些番鴨可能是由荷蘭殖民者引入台灣的。'  
    ,description_en:'After the 15th century, Muscovy ducks were spread to other parts of the world by European merchant ships. At the end of the Ming Dynasty 明朝, some of Taiwan\'s indigenous peoples began to raise Muscovy ducks. These ducks were probably introduced to Taiwan by the Dutch colonizers.'
	,reference:'1. 李偉良，〈清代民國時期番鴨的傳入及其影響〉，《安徽史學》，期3（2022年6月），頁59。'
    ,image:''
    ,referenceUrl:''});		
  //台灣宜蘭	-lat:24.7427509,lng:121.6938
   
//越南順華，陝西西安	-lat:16.4532761,lng:107.5694

     	

}

//宋
{}

//元
{}

//明
{
    markers.muscovy3 = createMarker({lat:25.1256,lng:121.7306}, 'muscovy','台灣基隆',{ A:['muscovy'], B:['清'],C:['飲食'],D:['海上絲綢之路'],E:['東亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'中國最早關於番鴨的文字記載出自於福建省平和縣的地方志，該地方志編纂於康熙五十八年（公元1719年）。平和縣的番鴨可能是在康熙收復台灣後從台灣地區引入的，是中國大陸最早開始飼養番鴨的地區。'  
     ,description_en:'The earliest written record of Muscovy ducks in China comes from the chorography of Pinghe 平和, Fujian Province 福建省, compiled in 1719. The Muscovy ducks in Pinghe were probably introduced from Taiwan after the restoration of Taiwan by the Kangxi Emperor 康熙皇帝, making it the earliest place to raise Muscovy ducks in mainland China.'
	,reference:'1. 李偉良，〈清代民國時期番鴨的傳入及其影響〉，《安徽史學》，期3（2022年6月），頁59。'
     ,image:''
     ,referenceUrl:''});	
//福建平和	-lat:24.2597482,lng:116.9433
    
markers.muscovy4 = createMarker({lat:3.1396,lng:101.6419}, 'muscovy','馬來西亞吉隆坡',{ A:['muscovy'], B:['清'],C:['飲食'],D:['海上絲綢之路'],E:['東南亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'清朝中後期，也有部分番鴨是從南洋引入的。例如海南島飼養的番鴨就是由出海經商的華僑從東南亞地區帶回飼養的，引入時間可能在光緒年間。'  
     ,description_en:'In the middle and late Qing Dynasty 清朝, some Muscovy ducks were introduced from Southeast Asia. For example, the Muscovy ducks raised on Hainan Island 海南島 were brought back from Southeast Asia by overseas Chinese businessmen, and the time of introduction was probably during the Guangxu 光緒 period.'
	,reference:'1. 李偉良，〈清代民國時期番鴨的傳入及其影響〉，《安徽史學》，期3（2022年6月），頁59。'
     ,image:''
     ,referenceUrl:''});
//海南海口	-lat:20.0381253,lng:110.1773
    
markers.muscovy5 = createMarker({lat:21.0272,lng:105.8259}, 'muscovy','越南河內',{ A:['muscovy'], B:['清'],C:['飲食'],D:['陸上絲綢之路'],E:['東南亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'除了海路，也有部分番鴨是通過陸路引入清朝的。有學者認為，越南的番鴨可能是通過陸路貿易引入廣西地區的。'  
     ,description_en:'Except for the sea route, some Muscovy ducks were also introduced to the Qing Dynasty 清朝 through the land route. Some scholars believe that Vietnamese Muscovy ducks may have been imported to Guangxi 廣西 through land trade.'
	,reference:'1. 李偉良，〈清代民國時期番鴨的傳入及其影響〉，《安徽史學》，期3（2022年6月），頁60。'
     ,image:''
     ,referenceUrl:''});
//廣西桂林	-lat:25.2723415,lng:110.2823
     
     
}

//清
{	 
    
    
}
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var muscovys = [
 'muscovy1', 'muscovy2', 'muscovy3', 'muscovy4', 'muscovy5' 
];

for (var i = 0; i < muscovys.length; i++) {
 window[muscovys[i]] = markers[muscovys[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京



var newCoords_muscovy2_1= {lat:24.7427,lng:121.6938};

var newCoords_muscovy3_1= {lat:24.2597,lng:116.9433};
var newCoords_muscovy4_1= {lat:20.0381,lng:110.1773};
var newCoords_muscovy5_1= {lat:25.2723,lng:110.2823};


//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(muscovy) {
 const position = muscovy.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}



var initialCoords_muscovy2 = getInitialCoords(muscovy2);
var initialCoords_muscovy3 = getInitialCoords(muscovy3);
var initialCoords_muscovy4 = getInitialCoords(muscovy4);
var initialCoords_muscovy5 = getInitialCoords(muscovy5);





// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {

        
        markers.muscovy2.setPosition(initialCoords_muscovy2);
        markers.muscovy3.setPosition(initialCoords_muscovy3);
        markers.muscovy4.setPosition(initialCoords_muscovy4);
        markers.muscovy5.setPosition(initialCoords_muscovy5);
     
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        
       

    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
       
        
        
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){
        
       
        
    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
       
       
      
    }
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
       
            
            
           

    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {}
   //明
    if(currentValue >=7000 && currentValue <8000){

        
        var points_2 = [initialCoords_muscovy2,newCoords_muscovy2_1, newCoords_muscovy2_1];
        
    // 计算当前阶段的目标点的索引
       
        var targetIndex_2 = Math.floor((currentValue - 7000) / (1000 / (points_2.length-1)));
        

    // 计算插值百分比
        
        var percentage_2 = (currentValue - 7000) % (1000 / (points_2.length-1)) / (1000 / (points_2.length-1));
        

        
        percentage_2 = Math.min(1, Math.max(0, percentage_2));
        

    // 计算插值的新位置
        

        var latDiff = points_2[targetIndex_2 + 1].lat - points_2[targetIndex_2].lat;
        var lngDiff = points_2[targetIndex_2 + 1].lng - points_2[targetIndex_2].lng;
        var interpolatedLat_2 = points_2[targetIndex_2].lat + latDiff * percentage_2
        var interpolatedLng_2 = points_2[targetIndex_2].lng + lngDiff * percentage_2

        
        
        
        muscovy2.setPosition({ lat: interpolatedLat_2, lng: interpolatedLng_2 });     
        
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){
        
        var points_4 = [initialCoords_muscovy4, newCoords_muscovy4_1, newCoords_muscovy4_1,newCoords_muscovy4_1];
        var points_5 = [initialCoords_muscovy5, newCoords_muscovy5_1, newCoords_muscovy5_1];
        var points_3 = [initialCoords_muscovy3, newCoords_muscovy3_1, newCoords_muscovy3_1];

        var targetIndex_4 = Math.floor((currentValue - 8000) / (1000 / (points_4.length-1)));
        var targetIndex_5 = Math.floor((currentValue - 8000) / (1000 / (points_5.length-1)));
        var targetIndex_3 = Math.floor((currentValue - 8000) / (1000 / (points_3.length-1)));
        
        var percentage_4 = (currentValue - 8000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
        var percentage_5 = (currentValue - 8000) % (1000 / (points_5.length-1)) / (1000 / (points_5.length-1));
        var percentage_3 = (currentValue - 8000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
        
        percentage_4 = Math.min(1, Math.max(0, percentage_4));
        percentage_5 = Math.min(1, Math.max(0, percentage_5));
        percentage_3 = Math.min(1, Math.max(0, percentage_3));
       
        var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
        var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
        var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4
        var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4

        var latDiff = points_5[targetIndex_5 + 1].lat - points_5[targetIndex_5].lat;
        var lngDiff = points_5[targetIndex_5 + 1].lng - points_5[targetIndex_5].lng;
        var interpolatedLat_5 = points_5[targetIndex_5].lat + latDiff * percentage_5
        var interpolatedLng_5 = points_5[targetIndex_5].lng + lngDiff * percentage_5
    
        var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
        var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
        var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3
        var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3

        muscovy4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });
        muscovy5.setPosition({ lat: interpolatedLat_5, lng: interpolatedLng_5 });
        muscovy3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });
    }



});




