//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{  markers.peacock1 = createMarker({ lat:36.092554,lng:114.3586 }, 'peacock','河南安陽',{ A:['peacock'],B:['史前至夏商周'],C:['宗教信仰'],D:['其他'],E:['東亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'在位於河南安陽的殷墟遺址中，考古學家發現了孔雀的骸骨，這說明當時的中國北方曾有野生孔雀。此外，在五號墓中發現了一件精美的玉鳳。考古學家們推測，鳳凰的形象可能是商代人以孔雀為原型構建的。'  
 ,description_en:'In the Site of Yinxu 殷墟 in Anyang 安陽, Henan Province 河南省, archaeologists found the skeleton of peacocks, which suggests that wild peacocks once existed in northern China in the late Shang Dynasty. In addition, a beautiful jade phoenix was found in Tomb No. 5. Archaeologists have hypothesized that the phoenix may have been constructed by the Shang people 商人 based on the peacock.'
,reference:'1. 李碩，《翦商：殷周之變與華夏新生》（南寧：廣西師範大學出版社，2022），頁100。<br>&emsp;&emsp;&emsp;2. 周菲，〈安陽殷墟五號墓出土玉鳳〉，《史學月刊》，總期139（1982年9月），封二。'
 ,image:'media/OneDrive_1_2024-1-8/442. (Shang Dynasty, Jade Phoenix in Fuhao Tomb, housed in National Museum of China) .png'
 ,image_content_cn:'商，殷墟婦好墓玉鳳，中國國家博物館藏'
,image_content_en:'Shang Dynasty, Jade Phoenix in Fuhao Tomb, housed in National Museum of China'
   ,referenceUrl:''});
						
 
}
 //秦漢
{markers.peacock2 = createMarker({lat:37.5853,lng:13.5645 }, 'peacock','意大利西西里島',{ A:['peacock'],B:['秦漢'],C:['飲食'],D:['其他'],E:['歐洲'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'在歐洲，孔雀曾經是貴族們餐桌上常見的食物，這個飲食習慣可以追溯至古羅馬時期。在當時意大利周邊的島嶼上，人們已經大量飼養孔雀以供食用。'  
 ,description_en:'In Europe, peacocks were once a common food for the nobility. This custom dates back to the ancient Roman period. Peacocks were raised for food on the islands around Italy at that time.'
,reference:'1. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T’ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 96.'  
 ,image:''
 ,referenceUrl:''});
					

 markers.peacock3 = createMarker({lat:23.1326,lng:113.2157}, 'peacock','廣東廣州',{ A:['peacock'],B:['秦漢'],C:['朝貢'],D:['海上絲綢之路'],E:['東亞'] },
 {title_cn: '描述',title_en: 'Description'  
  ,description_cn:'南越國是秦末漢初時期的一個割據政權，由趙佗建立，其疆域範圍大概包括現在的廣東、廣西、海南、香港、澳門、以及越南的中北部地區。其治所位於番禺（今廣東廣州）。漢武帝時期，南越國曾進貢四隻孔雀。'  
  ,description_en:'The Nanyue Kingdom 南越國 was a ruling regime founded by Zhao Tuo 趙佗 in the late Qin 秦 and early Han Dynasties 漢朝. Its territory roughly covered the present-day areas of Guangdong 廣東, Guangxi 廣西, Hainan 河南, Hong Kong, Macao, and the north-central part of Vietnam. Its capital was located in Panyu 番禺 (present-day Guangzhou 廣州, Guangdong 廣州). During the period of Emperor Wu of the Han Dynasty 漢武帝,  the Nanyue Kingdom once paid four peacocks as tributes to Western Han 西漢.'
,reference:'1. 班固，《漢書·西南夷兩粵朝鮮傳第六十五》（北京：中華書局，1997），頁3852。'  
  ,image:''
  ,referenceUrl:''});
//陝西西安	
 
}
//三国
{markers.peacock4 = createMarker({ lat:41.7060,lng:82.9379 }, 'peacock','新疆庫車',{ A:['peacock'],B:['三國兩晉南北朝'],C:['飲食'],D:['陸上絲綢之路'],E:['東亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'北魏曾多次派遣軍隊征服西域。在北魏的史料中，龜茲（今新疆庫車）當地的富人會大量飼養孔雀以食用。'  
 ,description_en:'The Northern Wei Dynasty 北魏 had sent armies to conquer the Western Regions several times. In the historical records of the Northern Wei Dynasty, the rich people of Kucha (present-day Kuche 庫車, Xinjiang 新疆) would raise peacocks in large numbers for food.'
,reference:'1. 魏收，《魏書·列傳第九十》（北京：中華書局，1997），頁2266-2267。'  
 ,image:''
 ,referenceUrl:''});			
 
markers.peacock5 = createMarker({ lat:-8.4163,lng:115.1090}, 'peacock','印度尼西亞巴厘島',{ A:['peacock'],B:['三國兩晉南北朝'],C:['身份象徵'],D:['海上絲綢之路'],E:['東南亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'婆利是位於巴厘島的古代王國。南朝梁曾派遣使者前往婆利進行外交活動。他們記錄了婆利宮廷使用孔雀羽毛扇子的情況。'  
 ,description_en:'The PoLi Kingdoms was an ancient kingdom located on Bali Island. Liang of the Southern Dynasty 南朝梁 sent envoys to PoLi for diplomatic activities. They recorded the use of peacock feather fans in the court of PoLi.'
,reference:'1. 姚思廉，《梁書·列傳第四十八》（北京：中華書局，1997），頁796。'  
 ,image:''
 ,referenceUrl:''});
							
 
}
//隋
{
}

//唐
{  

    


markers.peacock6 = createMarker({lat:25.1218,lng:85.4574}, 'peacock','印度那爛陀',{ A:['peacock'],B:['唐'],C:['宗教信仰'],D:['陸上絲綢之路'],E:['南亞'] },
 {title_cn: '描述',title_en: 'Description'  
  ,description_cn:'孔雀在佛教文化中有著重要的意義和地位。孔雀明王，佛教中的智慧之王，被視作佛陀的化身之一。玄奘前往天竺取經的過程中曾記錄了孔雀明王的傳說。'  
  ,description_en:'Peacock has an important meaning and status in Buddhist culture. Mahamayuri (King of Peacock), the king of wisdom in Buddhism, was regarded as one of the incarnations of the Buddha. The legend of the King of Peacock was recorded by Xuanzang 玄奘 during his journey to ancient India.'
,reference:'1. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T’ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 98-99.'
  ,image:''
  ,referenceUrl:''});
	
  
  markers.peacock7 = createMarker({ lat:20.9095,lng:110.0846}, 'peacock','海南雷州',{ A:['peacock'],B:['唐'],C:['飲食'],D:['其他'],E:['東亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'契丹唐代的海南島有大量的野生孔雀。唐朝人認為孔雀有解毒的功效，因此當地人會捕獲孔雀以食用。是古代中國北方的遊牧民族，建立了遼朝。「豹獵」的習俗在契丹文化中也有所保留。遼代的獵豹來自來自西域地區的朝貢。例如，重熙二十一年（公元1052年），高昌回鶻向遼進貢馬和獵豹。'  
 ,description_en:'During the Tang Dynasty 唐朝, there were large numbers of wild peacocks on Hainan Island 海南島. The Tang people believed that peacocks had the power to detoxify poison, so the local people would catch peacocks for eating.	'
,reference:'1. Edward H.Schafer, The Golden Peaches of Samarkand: A Study of T’ang Exotics (Berkeley and Los Angeles: University of California Press, 1963), pp. 97.'  
 ,image:''
 ,referenceUrl:''});
 							
 
}

//宋
{
//內蒙古赤峰	-lat:42.2423849,lng:118.9094

}
//元
{

 

}

//明
{
    markers.peacock8 = createMarker({lat:13.7507,lng:100.4758}, 'peacock','泰國曼谷',{ A:['peacock'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'泰國在明朝時被稱為暹羅。鄭和下西洋時曾多次到達暹羅並進行貿易。暹羅經常前往明朝進行朝貢，孔雀以及孔雀羽毛製品是常見的暹羅貢品。'  
     ,description_en:'Zheng He 鄭和 visited Thailand and traded there several times during his voyages. Thailand regularly paid tribute to the Ming Dynasty 明朝. Peacocks and peacock feathers were common offerings from Thailand.'
    ,reference:'1. 張廷玉等，《明史·列傳第二百十二》（北京：中華書局，1997），頁8403。'
     ,image:''
     ,referenceUrl:''});  		
         
    
}

//清
{
    markers.peacock9 = createMarker({lat:13.8162,lng:100.4460}, 'peacock','泰國曼谷',{ A:['peacock'],B:['清'],C:['文化娛樂'],D:['海上絲綢之路'],E:['東南亞'] },
    {title_cn: '描述',title_en: 'Description'  
     ,description_cn:'孔雀在清朝主要作為觀賞動物而飼養在各類園林中。這些孔雀主要從泰國進口。'  
     ,description_en:'Peacocks were mainly kept as ornamental animals in various gardens during the Qing Dynasty 清朝. These peacocks were mainly imported from Thailand.'
    ,reference:'1. 徐珂，《清稗類鈔·第十二冊》（北京：中華書局，2010），頁5573-5574。'  
     ,image:''
     ,referenceUrl:''}); 
 
 }
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var peacocks = [
 'peacock1', 'peacock2', 'peacock3', 'peacock4', 'peacock5', 'peacock6', 'peacock7', 'peacock8', 'peacock9'
];

for (var i = 0; i < peacocks.length; i++) {
 window[peacocks[i]] = markers[peacocks[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京



var newCoords_peacock3_1= RandomCoords(xian);
var newCoords_peacock6_1= RandomCoords(xian);


var newCoords_peacock8_1= RandomCoords(beijing);
var newCoords_peacock9_1= RandomCoords(beijing);



//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(peacock) {
 const position = peacock.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}

var initialCoords_peacock3 = getInitialCoords(peacock3);
var initialCoords_peacock6 = getInitialCoords(peacock6);
var initialCoords_peacock8 = getInitialCoords(peacock8);
var initialCoords_peacock9 = getInitialCoords(peacock9);


// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {
        markers.peacock3.setPosition(initialCoords_peacock3);
        markers.peacock6.setPosition(initialCoords_peacock6);
        markers.peacock8.setPosition(initialCoords_peacock8);
        markers.peacock9.setPosition(initialCoords_peacock9);
       
     
    }
    //史前
    if(currentValue>0&&currentValue<1000){}
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000){ 
        var points_3 = [initialCoords_peacock3,  newCoords_peacock3_1, newCoords_peacock3_1];
   
    // 计算当前阶段的目标点的索引
        var targetIndex_3 = Math.floor((currentValue - 1000) / (1000 / (points_3.length-1)));
        
    // 计算插值百分比
        var percentage_3 = (currentValue - 1000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
        
        
        percentage_3 = Math.min(1, Math.max(0, percentage_3));
        
        
    // 计算插值的新位置


        var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
        var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
        var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3;
        var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3;

        
        
    // 设置peacock23的位置
        peacock3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });}
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){
        
    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
       

        var points_6 = [initialCoords_peacock6,  newCoords_peacock6_1, newCoords_peacock6_1];
        
        
        
    
        
    // 计算当前阶段的目标点的索引
        
       var targetIndex_6 = Math.floor((currentValue - 4000) / (1000 / (points_6.length-1)));
  
    // 计算插值百分比
       
        var percentage_6 = (currentValue - 4000) % (1000 / (points_6.length-1)) / (1000 / (points_6.length-1));
        

        
        


        
       percentage_6 = Math.min(1, Math.max(0, percentage_6));
        

    // 计算插值的新位置
        
        
        
        var latDiff = points_6[targetIndex_6 + 1].lat - points_6[targetIndex_6].lat;
        var lngDiff = points_6[targetIndex_6 + 1].lng - points_6[targetIndex_6].lng;
        var interpolatedLat_6 = points_6[targetIndex_6].lat + latDiff * percentage_6
        var interpolatedLng_6 = points_6[targetIndex_6].lng + lngDiff * percentage_6

  
        
       peacock6.setPosition({ lat: interpolatedLat_6, lng: interpolatedLng_6 });
        

    }
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
       
       
    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {
    
               
    }
   //明
    if(currentValue >=7000 && currentValue <8000){
        
        
        var points_8 = [initialCoords_peacock8, nanhai,taihai,zhangjiagang,newCoords_peacock8_1, newCoords_peacock8_1];
        
    // 计算当前阶段的目标点的索引
       
        
        var targetIndex_8 = Math.floor((currentValue - 7000) / (1000 / (points_8.length-1)));
       
    // 计算插值百分比
        
       
        var percentage_8 = (currentValue - 7000) % (1000 / (points_8.length-1)) / (1000 / (points_8.length-1));
        
        
        
        percentage_8 = Math.min(1, Math.max(0, percentage_8));
       

    // 计算插值的新位置
        
        

        var latDiff = points_8[targetIndex_8 + 1].lat - points_8[targetIndex_8].lat;
        var lngDiff = points_8[targetIndex_8 + 1].lng - points_8[targetIndex_8].lng;
        var interpolatedLat_8 = points_8[targetIndex_8].lat + latDiff * percentage_8
        var interpolatedLng_8 = points_8[targetIndex_8].lng + lngDiff * percentage_8

        
        
        peacock8.setPosition({ lat: interpolatedLat_8, lng: interpolatedLng_8 });     
    
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){
         
        var points_9 = [initialCoords_peacock9, nanhai,taihai,zhangjiagang,newCoords_peacock9_1, newCoords_peacock9_1];
   
    // 计算当前阶段的目标点的索引
        var targetIndex_9 = Math.floor((currentValue - 8000) / (1000 / (points_9.length-1)));
        
    // 计算插值百分比
        var percentage_9 = (currentValue - 8000) % (1000 / (points_9.length-1)) / (1000 / (points_9.length-1));
        
        
        percentage_9 = Math.min(1, Math.max(0, percentage_9));
        
        
    // 计算插值的新位置


        var latDiff = points_9[targetIndex_9 + 1].lat - points_9[targetIndex_9].lat;
        var lngDiff = points_9[targetIndex_9 + 1].lng - points_9[targetIndex_9].lng;
        var interpolatedLat_9 = points_9[targetIndex_9].lat + latDiff * percentage_9;
        var interpolatedLng_9 = points_9[targetIndex_9].lng + lngDiff * percentage_9;

        
        
    // 设置peacock29的位置
        peacock9.setPosition({ lat: interpolatedLat_9, lng: interpolatedLng_9 });
        
   }


});




