
//<br>&emsp;&emsp;&emsp;
//史前至夏商周
{

 
}


 //秦漢
{
    markers.turtle1 = createMarker({lat:36.0960,lng:114.3535}, 'turtle','河南安陽',{ A:['turtle'], B:['史前至夏商周'],C:['宗教信仰'],D:['其他'],E:['東亞'] }
,{  title_cn: '描述',title_en: 'Description',
    description_cn: '甲骨文是已知的中國最早的文字系統，主要使用於商代。這些文字主要雕刻在獸骨和龜甲上。在位於河南安陽的殷墟遺址中，考古學家已經發掘了超過15萬片帶有刻辭的獸骨和龜甲。這些文字的主要內容是商代人占卜活動的有關記錄。'
    ,description_en:'Oracle bone script is an ancient Chinese character during the Shang Dynasty 商朝, and is also known as the earliest Chinese writing system. Oracle bone writing was mainly engraved on animal bones and turtle plastrons. At the Site of Yinxu 殷墟, located in Anyang 安陽, Henan Province 河南省, more than 150,000 pieces with oracle bone script have been discovered. The main content of these characters is the relevant records of divination activities of the Shang people.'
,reference:'1. 刻辭龜甲，河南博物院網站，www.chnmus.net/sitesources/hnsbwy/page_pc/bwzl/yyhxzzjd/cpsx/article42e682f4069846c3b4d611cd939a3baf.html。'
    ,imag:''
    ,referenceUrl:''
 });
								
 1										
                 
}
//三国
{ 
markers.turtle2 = createMarker({lat:23.1351,lng:113.2252}, 'turtle','廣東廣州',{ A:['turtle'], B:['秦漢'],C:['身份象徵'],D:['海上絲綢之路'],E:['東亞'] },
{title_cn: '描述',title_en: 'Description'  
,description_cn:'玳瑁是由大型陸龜或者海龜（主要是玳瑁海龜）的背甲製成的奢侈品材料。在古代中國，廣東地區是玳瑁的主要來源地之一。漢代的商人們往往前往番禺（今廣東廣州）進行玳瑁貿易。'  
,description_en:'Tortoiseshell is a luxury material produced from the shells of the larger species of tortoise and turtle, especially the hawksbill sea turtle. In ancient China, the Guangdong 廣東 region was one of the main sources of tortoiseshell. Merchants in the Han Dynasty 漢朝 often traveled from Panyu 番禺 (present-day Guangzhou 廣州, Guangdong 廣東) to conduct the trade of tortoiseshell.'
,reference:'1. 班固，《漢書·地理志第八下》（北京：中華書局，1997），頁1670。'  
,image:''
,referenceUrl:''
								
 
});


markers.turtle3 = createMarker({lat:41.8945347,lng:12.4928}, 'turtle','意大利羅馬',{ A:['turtle'], B:['秦漢'],C:['朝貢'],D:['海上絲綢之路'],E:['歐洲']},
{title_cn: '描述',title_en: 'Description'  
,description_cn:'羅馬帝國在漢代時被稱為大秦。延熹九年（公元166年），一夥大秦使者在日南郡登陸（今越南東河），向東漢進貢。他們攜帶的貢品中有許多奢侈品，比如玳瑁。這是羅馬帝國和古代中國之間的第一次交往。但在西方的歷史記載中並沒有這次出訪中國的記載，因此有的歷史學家認為這些人的真實身份是來自羅馬帝國的商人而非官方使者。儘管這群羅馬使者的身份成疑，他們都對古代東西方之間的交流做出了貢獻。'  
,description_en:'In 166, a group of envoys from Roman Empire made a tribute to the Eastern Han Dynasty 東漢 by landing at the Rinan Commandery 日南郡 (present-day Dong Ha, Vietnam). The tribute they carried included many luxury items, like tortoiseshells. This was the first interaction between the Roman Empire and ancient China. However, there is no record of this visit in Western history. Therefore, some historians believe that these people were actually merchants from the Roman Empire rather than official envoys. Although the identities of these Roman envoys are in doubt, they all contributed to the exchange between the East and the West in ancient history.'
,reference:'1. 范曄，《後漢書·西域傳第七十八》（北京：中華書局，1997），頁2920。<br>&emsp;&emsp;&emsp;2. 大秦王安敦通使於漢，中國大百科全書網站，www.zgbk.com/ecph/words?SiteID=1&ID=504832&Type=bkztb&SubID=704。'
,image:''
,referenceUrl:''});				
//越南東河，河南洛陽	-lat:16.8043076,lng:107.0779
                   
}

//隋
{


}

//唐
{
         
 markers.turtle4 = createMarker({lat:-6.8915,lng:109.6739}, 'turtle','印度尼西亞北加浪岸',{ A:['turtle'], B:['唐'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
 {title_cn: '描述',title_en: 'Description'  
  ,description_cn:'訶陵，又稱闍婆，是爪哇島北部的一個古代國家。元和十三年（公元818年），訶陵向唐朝進貢了鸚鵡和玳瑁。'  
  ,description_en:'Kalingga Kingdom was an ancient Kingdom located on the north coast of Java. In 818, Kalingga contributed parrots and tortoiseshell to the Tang Dynasty.'
 ,reference:'1. 劉昫等，《舊唐書·列傳第一百四十七》（北京：中華書局，1997），頁5273。'
  ,image:''
  ,referenceUrl:''});
 
  
markers.turtle5 = createMarker({lat:-6.8915,lng:109.6709}, 'turtle','印度尼西亞北加浪岸',{ A:['turtle'],B:['宋'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'闍婆（今爪哇島北部）曾向北宋進貢過白鸚鵡，此外還有珍珠、玳瑁等珠寶。'  
 ,description_en:'The Kalingga Kingdom (present-day northern Java) contributed white parrots to the Northern Song Dynasty 北宋, as well as pearls, tortoiseshells, and other jewels.'
,reference:'1. 脫脫等，《宋史·列傳第二百四十八》（北京：中華書局，1997），頁14092。'
 ,imag:''});		

markers.turtle6 = createMarker({ lat:-2.9784,lng:104.7767}, 'turtle','印度尼西亞巨港',{ A:['turtle'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
{title_cn: '描述',title_en: 'Description'  
 ,description_cn:'三佛齊是一個信仰佛教的東南亞國家，其鼎盛時期曾經佔據如今馬來西亞和印度尼西亞的大部分領土。洪武十年（公元1377年），三佛齊首次向明朝進貢。在貢品中有一種可以入藥的龜殼，被稱為龜筒。'  
 ,description_en:'The Srivijaya was a Buddhist kingdom in Southeast Asia, which at its height occupied most of what is now Malaysia and Indonesia. In 1377, the Srivijaya first paid tribute to the Ming Dynasty 明朝. There were some turtle shells in the tributes, which were regarded as a kind of medicinal herbs in ancient times.'
,reference:'1. 張廷玉等，《明史·列傳第二百十二》（北京：中華書局，1997），頁8406-8407。'
 ,image:''
 ,referenceUrl:''});
//江蘇南京	-lat:32.0577333,lng:118.7666


markers.turtle7 = createMarker({ lat:13.7266,lng:100.5125}, 'turtle','泰國曼谷',{ A:['turtle'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'泰國在明朝時被稱為暹羅。鄭和下西洋時曾多次到達暹羅並進行貿易。暹羅經常前往明朝進行朝貢，除了龜筒以外，活的海龜也是常見的來自暹羅的貢品。'  
    ,description_en:'Zheng He 鄭和 visited Thailand and traded there several times during his voyages to the West. Thailand regularly paid tribute to the Ming Dynasty 明朝. In addition to turtle shells, the live sea turtles were also common tribute from Thailand.'
   ,reference:'1. 張廷玉等，《明史·列傳第二百十二》（北京：中華書局，1997），頁8403。'
    ,image:''
    ,referenceUrl:''});	     

    
   markers.turtle8 = createMarker({lat:2.2029,lng:102.2426}, 'turtle','馬來西亞馬六甲',{ A:['turtle'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'馬六甲蘇丹國，在《明史》中被稱為滿剌加。鄭和下西洋時，其國王跟隨鄭和一同返回，成為了明王朝的藩屬國。該國地處馬六甲海峽，是連接印度洋和太平洋的必經之路，也是古代東西方海上貿易的中轉站。因此，當地的奢侈品貿易非常繁榮。根據記載，玳瑁是常見的來自於滿剌加的貢品。'  
    ,description_en:'Zheng He 鄭和 once reached Malacca Sultanate on his ocean voyages. The Malacca Sultanate became a tributary of the Ming Dynasty 明朝 and maintain a close relationship for a long time. Located in the Strait of Malacca, the state was an essential route connecting the Indian and Pacific Oceans and was also a transit point for the ancient maritime trade between the East and the West. Therefore, the trade of luxury goods was very prosperous in the region. It is recorded that tortoiseshells were common tribute from Malacca Sultanate.'
   ,reference:'1. 張廷玉等，《明史·列傳第二百十三》（北京：中華書局，1997），頁8419。'
    ,image:''
    ,referenceUrl:''});
//廣東廣州，江蘇南京，北京	l-lat:23.1093552,lng:113.0934-lat:32.0689363,lng:118.7829
   
}

//宋
{
   

    
   markers.turtle9 = createMarker({lat:1.4754,lng:103.8907}, 'turtle','馬來西亞柔佛',{ A:['turtle'],B:['明'],C:['朝貢'],D:['海上絲綢之路'],E:['東南亞'] },
   {title_cn: '描述',title_en: 'Description'  
    ,description_cn:'柔佛位於馬來半島的南部。明朝時，玳瑁是常見的來自柔佛的貢品之一。'  
    ,description_en:'Johor is located in the southern part of the Malay Peninsula. During the Ming Dynasty 明朝, tortoiseshell was one of the most common tributes from Johor.'
   ,reference:'1. 張廷玉等，《明史·列傳第二百十三》（北京：中華書局，1997），頁8429。'
    ,image:''
    ,referenceUrl:''});


}
//元
{

     
  
	

}

//清
{
	
  
 
 }
        

// 获取时间轴元素和标记
var timeline = document.getElementById('timeline');
var slider = document.getElementById('slider');
var turtles = [
 'turtle1', 'turtle2', 'turtle3', 'turtle4', 'turtle5', 'turtle6', 'turtle7', 'turtle8', 'turtle9', 

];

for (var i = 0; i < turtles.length; i++) {
 window[turtles[i]] = markers[turtles[i]];
}



// 定义新坐标和初始坐标

// 定义一个函数，生成指定范围内的随机数
function getRandomNumber(min, max) {
 return Math.random() * (max - min) + min;
}

// 定义一个函数，生成新的坐标对象，并添加随机数
function RandomCoords(coords) {
 var randomLat = coords.lat + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 var randomLng = coords.lng + getRandomNumber(-0.05, 0.05); // 在-0.1到0.1之间生成随机数
 return { lat: randomLat, lng: randomLng };
}

var xian= {lat:34.2655,lng:108.9508};//西安
var luoyang= {lat:34.6321,lng:112.4470}//洛阳
var kaifeng ={lat:34.7872,lng:114.3081};//开封
var beijing ={lat:39.9171,lng:116.3797};//北京
var nanjing={lat:32.0435,lng:118.7501}//南京

var newCoords_turtle3_1= {lat:16.8043076,lng:107.0779};
var newCoords_turtle3_2= RandomCoords(luoyang);

var newCoords_turtle4_1= RandomCoords(xian);

var newCoords_turtle5_1= RandomCoords(kaifeng);

var newCoords_turtle6_1= RandomCoords(nanjing);

var newCoords_turtle7_1= RandomCoords(beijing);
var newCoords_turtle8_1= {lat:23.1093552,lng:113.0934};
var newCoords_turtle8_2= RandomCoords(nanjing);
var newCoords_turtle8_3= RandomCoords(beijing);

var newCoords_turtle9_1= RandomCoords(beijing);







//河西走廊:敦煌-酒泉-张掖-武威
var dunhuang= { lat:	40.1130	,lng:94.6618 }; 
var wuwei = {lat:37.9283,lng:102.6371};
var jiuquan={lat:39.7237,lng:98.3444}
var zhangye = {lat:38.9177,lng:100.3065};
//海上絲路：古里-xilan-palk-馬六甲
var guli ={lat:11.2618,lng:75.7822};
var xilan={lat:6.9397,lng:79.8259};
var palk={lat:10.0803,lng:80.1207};
var maliujia={lat:2.2373,lng:102.1691};
var kailuo={lat:	30.0444 ,lng:31.2357};
var kemolin={lat:8.0864,lng:77.5355};
var jibudi={lat:11.8125,lng:41.9678};
var taihai={lat:24.2877,lng:119.5445};
var zhangjiagang={lat:31.8774,lng:120.4609};
var nanhai={lat:-0.3778,lng:106.0436};


function getInitialCoords(turtle) {
 const position = turtle.getPosition();
 return {
     lat: position.lat(),
     lng: position.lng()
 };
}


var initialCoords_turtle3 = getInitialCoords(turtle3);
var initialCoords_turtle4 = getInitialCoords(turtle4);
var initialCoords_turtle5 = getInitialCoords(turtle5);
var initialCoords_turtle6 = getInitialCoords(turtle6);
var initialCoords_turtle7 = getInitialCoords(turtle7);
var initialCoords_turtle8 = getInitialCoords(turtle8);
var initialCoords_turtle9 = getInitialCoords(turtle9);
// 添加滑块值变化的事件监听器
slider.addEventListener('input', function() {
    
   // handleToggleMarkers(currentValue)
   
    //史前之前
    if (currentValue<=0)
    {
   
        markers.turtle3.setPosition(initialCoords_turtle3);
        markers.turtle4.setPosition(initialCoords_turtle4);
        markers.turtle5.setPosition(initialCoords_turtle5);
        markers.turtle6.setPosition(initialCoords_turtle6);
        markers.turtle7.setPosition(initialCoords_turtle7);
        markers.turtle8.setPosition(initialCoords_turtle8);
        markers.turtle9.setPosition(initialCoords_turtle9);
    }
    //史前
    if(currentValue>0&&currentValue<1000)
    {
        
     
    }
    //秦汉
    if (currentValue >= 1000 && currentValue < 2000) {
        var points_3 = [initialCoords_turtle3,  kailuo,jibudi,guli,xilan,maliujia,newCoords_turtle3_1, newCoords_turtle3_2,newCoords_turtle3_2];
        
        
        
        // 计算当前阶段的目标点的索引
            
            var targetIndex_3 = Math.floor((currentValue - 1000) / (1000 / (points_3.length-1)));
            
    
    
    
        // 计算插值百分比
           
            var percentage_3 = (currentValue - 1000) % (1000 / (points_3.length-1)) / (1000 / (points_3.length-1));
            
    
            
            percentage_3 = Math.min(1, Math.max(0, percentage_3));
            
    
    
        // 计算插值的新位置
            
            
            var latDiff = points_3[targetIndex_3 + 1].lat - points_3[targetIndex_3].lat;
            var lngDiff = points_3[targetIndex_3 + 1].lng - points_3[targetIndex_3].lng;
            var interpolatedLat_3 = points_3[targetIndex_3].lat + latDiff * percentage_3
            var interpolatedLng_3 = points_3[targetIndex_3].lng + lngDiff * percentage_3
            
            
    
            
    
      
            
            turtle3.setPosition({ lat: interpolatedLat_3, lng: interpolatedLng_3 });  
            
    }
    //三国
    if (currentValue >= 2000 && currentValue <3000) {
        
    }
    //隋
    if(currentValue>=3000&&currentValue<4000){

    }
    //唐
    if (currentValue >= 4000 && currentValue < 5000) {
        var points_4 = [initialCoords_turtle4,newCoords_turtle4_1, newCoords_turtle4_1];
   
        // 计算当前阶段的目标点的索引
            var targetIndex_4 = Math.floor((currentValue - 4000) / (1000 / (points_4.length-1)));
            
        // 计算插值百分比
            var percentage_4 = (currentValue - 4000) % (1000 / (points_4.length-1)) / (1000 / (points_4.length-1));
            
            
            percentage_4 = Math.min(1, Math.max(0, percentage_4));
            
            
        // 计算插值的新位置
            
    
            var latDiff = points_4[targetIndex_4 + 1].lat - points_4[targetIndex_4].lat;
            var lngDiff = points_4[targetIndex_4 + 1].lng - points_4[targetIndex_4].lng;
            var interpolatedLat_4 = points_4[targetIndex_4].lat + latDiff * percentage_4;
            var interpolatedLng_4 = points_4[targetIndex_4].lng + lngDiff * percentage_4;
    
            
            
        // 设置turtle24的位置
            turtle4.setPosition({ lat: interpolatedLat_4, lng: interpolatedLng_4 });
            
        }
       

    
    //宋
    if (currentValue >= 5000 && currentValue <6000) {
        var points_5 = [initialCoords_turtle5,  newCoords_turtle5_1, newCoords_turtle5_1];
       
        
        
    // 计算当前阶段的目标点的索引
        var targetIndex_5 = Math.floor((currentValue - 5000) / (1000 / (points_5.length-1)));
        



    // 计算插值百分比
        var percentage_5 = (currentValue - 5000) % (1000 / (points_5.length-1)) / (1000 / (points_5.length-1));
       

        percentage_5 = Math.min(1, Math.max(0, percentage_5));
       


    // 计算插值的新位置
        

        var latDiff = points_5[targetIndex_5 + 1].lat - points_5[targetIndex_5].lat;
        var lngDiff = points_5[targetIndex_5 + 1].lng - points_5[targetIndex_5].lng;
        var interpolatedLat_5 = points_5[targetIndex_5].lat + latDiff * percentage_5
        var interpolatedLng_5 = points_5[targetIndex_5].lng + lngDiff * percentage_5

        

  
        turtle5.setPosition({ lat: interpolatedLat_5, lng: interpolatedLng_5 }); 
       
    }
    //元
    if (currentValue >= 6000 && currentValue <7000) {
   
           
    
    }
   //明
    if(currentValue >=7000 && currentValue <8000){
        
        var points_9 = [initialCoords_turtle9, newCoords_turtle9_1, newCoords_turtle9_1];
        var points_8 = [initialCoords_turtle8, newCoords_turtle8_1, newCoords_turtle8_2,newCoords_turtle8_3,newCoords_turtle8_3];
        var points_7 = [initialCoords_turtle7, newCoords_turtle7_1, newCoords_turtle7_1];
        var points_6 = [initialCoords_turtle6, newCoords_turtle6_1, newCoords_turtle6_1];

    // 计算当前阶段的目标点的索引
       
        var targetIndex_9 = Math.floor((currentValue - 7000) / (1000 / (points_9.length-1)));
        var targetIndex_8 = Math.floor((currentValue - 7000) / (1000 / (points_8.length-1)));
        var targetIndex_7 = Math.floor((currentValue - 7000) / (1000 / (points_7.length-1)));
        var targetIndex_6 = Math.floor((currentValue - 7000) / (1000 / (points_6.length-1)));


    // 计算插值百分比
        
        var percentage_9 = (currentValue - 7000) % (1000 / (points_9.length-1)) / (1000 / (points_9.length-1));
        var percentage_8 = (currentValue - 7000) % (1000 / (points_8.length-1)) / (1000 / (points_8.length-1));
        var percentage_7 = (currentValue - 7000) % (1000 / (points_7.length-1)) / (1000 / (points_7.length-1));
        var percentage_6 = (currentValue - 7000) % (1000 / (points_6.length-1)) / (1000 / (points_6.length-1));


        
        percentage_9 = Math.min(1, Math.max(0, percentage_9));
        percentage_8 = Math.min(1, Math.max(0, percentage_8));
        percentage_7 = Math.min(1, Math.max(0, percentage_7));
        percentage_6 = Math.min(1, Math.max(0, percentage_6));


    // 计算插值的新位置
        

        var latDiff = points_9[targetIndex_9 + 1].lat - points_9[targetIndex_9].lat;
        var lngDiff = points_9[targetIndex_9 + 1].lng - points_9[targetIndex_9].lng;
        var interpolatedLat_9 = points_9[targetIndex_9].lat + latDiff * percentage_9
        var interpolatedLng_9 = points_9[targetIndex_9].lng + lngDiff * percentage_9

        
        var latDiff = points_8[targetIndex_8 + 1].lat - points_8[targetIndex_8].lat;
        var lngDiff = points_8[targetIndex_8 + 1].lng - points_8[targetIndex_8].lng;
        var interpolatedLat_8 = points_8[targetIndex_8].lat + latDiff * percentage_8
        var interpolatedLng_8 = points_8[targetIndex_8].lng + lngDiff * percentage_8

        var latDiff = points_7[targetIndex_7 + 1].lat - points_7[targetIndex_7].lat;
        var lngDiff = points_7[targetIndex_7 + 1].lng - points_7[targetIndex_7].lng;
        var interpolatedLat_7 = points_7[targetIndex_7].lat + latDiff * percentage_7
        var interpolatedLng_7 = points_7[targetIndex_7].lng + lngDiff * percentage_7
    
        var latDiff = points_6[targetIndex_6 + 1].lat - points_6[targetIndex_6].lat;
        var lngDiff = points_6[targetIndex_6 + 1].lng - points_6[targetIndex_6].lng;
        var interpolatedLat_6 = points_6[targetIndex_6].lat + latDiff * percentage_6
        var interpolatedLng_6 = points_6[targetIndex_6].lng + lngDiff * percentage_6

        
        turtle9.setPosition({ lat: interpolatedLat_9, lng: interpolatedLng_9 });     
        turtle8.setPosition({ lat: interpolatedLat_8, lng: interpolatedLng_8 });
        turtle7.setPosition({ lat: interpolatedLat_7, lng: interpolatedLng_7 });
        turtle6.setPosition({ lat: interpolatedLat_6, lng: interpolatedLng_6 });
       
    
    }

    //清
    if(currentValue >=8000 && currentValue <=9000){
        
    }


});




